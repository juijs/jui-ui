jui.defineUI("ui.button",["jquery","util.base"],function(d,n){var o=function(t,e,i){this.data={index:0,value:"",elem:null},this.ui=t,this.element=e,this.options=d.extend({index:0,value:""},i),this._setting=function(e,i,n){var o=this,s="active",r=this.options.index,a=this.options.value;function l(t,e){var i=d(e).attr("value"),n=d(e).text();o.data={index:t,value:i,text:n},d(e).addClass(s)}function h(t){d(t).removeClass(s)}d(o.element).children(".btn").each(function(t){"event"==e?i.currentTarget==this?l(t,this):h(this):"init"==e&&("value"==n?a==d(this).attr("value")?l(t,this):h(this):r==t?l(t,this):h(this))})},this.init=function(){var e=this;this.ui.addEvent(d(e.element).children(".btn"),"click",function(t){if(d(t.currentTarget).hasClass("disabled"))return!1;e._setting("event",t),e.ui.emit("click",[e.data,t]),e.ui.emit("change",[e.data,t]),t.preventDefault()}),""!=this.options.value?this._setting("init",this.options.value,"value"):this._setting("init",this.options.index,"index")}},s=function(){this.data=[],this.options=d.extend({index:[],value:[]},this.options),this._setting=function(e,i,n){var o=this,s="active",r=this.options.index,a=this.options.value;function l(t,e){var i=d(e).attr("value"),n=d(e).text();o.data[t]={index:t,value:i,text:n},d(e).addClass(s)}function h(t,e){o.data[t]=null,d(e).removeClass(s)}function u(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}d(o.element).children(".btn").each(function(t){"init"==e?"value"==n?u(a,d(this).attr("value"))?l(t,this):h(t,this):u(r,t)?l(t,this):h(t,this):i.currentTarget==this&&(d(this).hasClass("active")?h(t,this):l(t,this))})}},t=function(){var i={};this.init=function(){var t=this,e=this.options;"radio"==e.type?(i[e.type]=new o(t,this.root,t.options),i[e.type].init()):"check"==e.type&&(s.prototype=new o(t,this.root,t.options),i[e.type]=new s,i[e.type].init())},this.setIndex=function(t){var e=i[this.options.type];e.options.index=t,e._setting("init",null,"index"),this.emit("change",[e.data])},this.setValue=function(t){var e=i[this.options.type];e.options.value=t,e._setting("init",null,"value"),this.emit("change",[e.data])},this.getData=function(){return i[this.options.type].data},this.getValue=function(){var t=this.getData();if(n.typeCheck("array",t)){for(var e=[],i=0;i<t.length;i++)e[i]=null!=t[i]?t[i].value:t[i];return e}return t.value},this.reload=function(){i[this.options.type]._setting("init")},this.enable=function(t){t?d(this.root).find(".btn").removeClass("disabled"):d(this.root).find(".btn").addClass("disabled")}};return t.setup=function(){return{type:"radio",index:0,value:""}},t}),jui.defineUI("ui.combo",["jquery","util.base"],function(p,f){var v=function(){for(var t=jui.get("ui.combo"),e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++)"open"==i[n].type&&i[n].fold()};p(function(){document.addEventListener("click",function(t){v()})});var t=function(){var l=null,h=null,u=-1;function e(o,s){var r=l.root,a=l.text,t=l.drop.children("li");t.each(function(t){var e=d(this),i=p(e).attr("value"),n=p(e).text();i||(i=n,p(e).attr("value",i)),("index"==o&&s==t||"value"==o&&s==i)&&(h={index:t,value:i,text:n},r.attr("value",i),a.html(n),r.select&&r.select[0]&&(r.select[0].selectedIndex=t))}),0==t.length&&(h=null)}function d(t){return 0<p(t).children("a").length?p(t).children("a")[0]:t}function c(t,e){var i=l.drop.children("li"),n=i.eq(u);i.removeClass("active"),""!=n.val()||""!=n.html()?(n.addClass("active"),0<t.options.height&&l.drop.scrollTop(u*n.outerHeight())):"function"==typeof e&&e()}function i(){var i=0;return l.drop.children("li").each(function(t){var e=d(this);i=Math.max(i,p(e).outerWidth())}),i}this.init=function(){var i,o=this,t=this.options,s=p(this.root),r=s.children(".btn").not(".toggle"),e=s.children(".toggle"),n=s.children(".btn"),a=s.children("ul");a.insertAfter(r),0<t.width&&(r.outerWidth(t.width-e.outerWidth()+1),r.css({"overflow-x":"hidden","overflow-y":"hidden","white-space":"nowrap"})),0<t.height&&a.css({"overflow-x":"hidden","overflow-y":"auto","max-height":t.height}),this.addEvent(n,"click",function(t){if(f.isTouch)s.select.focus();else{if("open"==o.type)return;v(),o.open(t)}return!1}),this.addEvent(a,"click","li:not(.divider)",function(t){v();var e=d(this),i=p(e).attr("value"),n=p(e).text();h={value:i,text:n,element:e},r.html(n),s.attr("value",i),o.emit("click",[h,t]),o.emit("change",[h,t]),t.preventDefault()}),l={root:s,text:r,drop:a,toggle:e},this.type="fold",this.reload(),(i=this).options.keydown&&(u=i.options.index,c(i),i.addEvent(window,"keydown",function(t){if("fold"!=i.type){var e=l.drop.children("li");return 38==t.which?(u<1?u=e.length-1:u--,c(i,function(){u--,c(i)}),!1):40==t.which?(u<e.length-1?u++:u=0,c(i,function(){u++,c(i)}),!1):void(13==t.which&&e.eq(u).trigger("click"))}}))},this.setIndex=function(t){e("index",t),this.emit("change",[h])},this.setValue=function(t){e("value",t),this.emit("change",[h])},this.getData=function(){return h},this.getValue=function(){return null!=h?h.value:null},this.getText=function(){return null!=h?h.text:null},this.open=function(t){if(l.toggle.addClass("active"),l.drop.outerWidth(l.root.outerWidth()-1),"top"==this.options.position){var e=l.drop.outerHeight();l.drop.animate({top:"-"+e,height:"toggle"},100)}else l.drop.slideDown(100);this.options.flex&&(i()>l.drop.outerWidth()&&l.drop.outerWidth(i()+50));this.emit("open",t),this.type="open"},this.fold=function(){l.drop.hide(),l.toggle.removeClass("active"),"top"==this.options.position&&l.drop.css("top",0),this.emit("fold"),this.type="fold"},this.reload=function(){""!=this.options.value?e("value",this.options.value):e("index",this.options.index),function(i){if(f.isTouch){var t=l.root;if(t.select&&t.select[0])(o=t.select).empty();else{var o=p("<select></select>").css({position:"absolute",opacity:.01});t.find("ul").after(o),i.addEvent(o,"change",function(t){var e=p(t.currentTarget).find("option:selected").data("elem");i.addTrigger(e,"touchstart")}),t.select=o}t.find("ul > li").each(function(t,e){var i=p(e).data("value"),n=p(e).text();o.append(p("<option></option>").val(i).text(n).data("elem",e))})}}(this),this.emit("reload",h)}};return t.setup=function(){return{index:0,value:"",width:0,height:100,keydown:!1,position:"bottom",flex:!0}},t}),jui.defineUI("ui.datepicker",["jquery","util.base"],function(x,a){function w(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}var t=function(){var l=null,h=null,p=null,u={},s=null,c=null,f=null,v=null;function r(i,n){var e=i.options,t=[],o=[];if(u={},i.tpl.date)for(var s=0;s<n.objs.length;s++)o.push(i.tpl.date({type:n.objs[s].type,date:n.objs[s].no,day:o.length})),a(s)&&(t.push("<tr>"+o.join("")+"</tr>"),o=[]);else for(s=0;s<n.objs.length;s++)o.push(n.nums[s]),a(s)&&(t.push(i.tpl.dates({dates:o})),o=[]);var r=x(t.join(""));function a(t){return"daily"==e.type?(t+1)%7==0:(t+1)%3==0}return r.find("td").each(function(e){x(this).addClass(n.objs[e].type),i.addEvent(this,"click",function(t){"none"!=n.objs[e].type&&(c.find("td").removeClass("active"),x(this).addClass("active"),function(t,e){var i=t.options;if("daily"==i.type){var n=h<10?"0"+h:h;p=new Date(l+"/"+n+"/"+(e<10?"0"+e:e))}else"monthly"==i.type?(n=e<10?"0"+e:e,p=new Date(l+"/"+n+"/01")):"yearly"==i.type&&(p=new Date(e+"/01/01"));p=w(p)}(i,n.objs[e].no),i.emit("select",[i.getFormat(),t]))}),"none"!=n.objs[e].type&&(u[n.objs[e].no]=this)}),r}function g(t,e){if(2==e)return t%100==0||t%4!=0&&t%400!=0?28:29;return[31,0,31,30,31,30,31,31,30,31,30,31][e-1]}this.init=function(){var e,t=this.options;s=x(this.root).children(".head"),c=x(this.root).children(".body"),f=a.typeCheck("date",t.minDate)?t.minDate:null,v=a.typeCheck("date",t.maxDate)?t.maxDate:null,"daily"==t.type&&(t.date<f?t.date=f:t.date<f&&(t.date=v),f&&v&&v<f&&(v=f=null)),(e=this).addEvent(s.children(".prev"),"click",function(t){e.prev(t)}),e.addEvent(s.children(".next"),"click",function(t){e.next(t)}),e.addEvent(s.children(".prev-year"),"click",function(t){e.prev(t,!0)}),e.addEvent(s.children(".next-year"),"click",function(t){e.next(t,!0)}),this.select(t.date)},this.page=function(t,e){if(0!=arguments.length){var i,n,o=this.options;"daily"==o.type?(l=t,h=e,c.find("tr:not(:first-child)").remove(),c.append(r(this,function(t,e,i){var n=[],o=[],s=1,r=new Date,a=new Date(e+"-"+(i<10?"0"+i:i)).getDay(),l=g(e,i),h=0,u=g(1==i?e-1:e,1==i?12:i-1);f&&f.getFullYear()==e&&f.getMonth()+1==i&&(h=f.getDate()),v&&v.getFullYear()==e&&v.getMonth()+1==i&&(l=v.getDate());for(var d=0;d<a;d++)o[d]=u-a+(d+1),n[d]={type:"none",no:o[d]};for(d=a;d<42;d++)if(h<=s&&s<=l){var c="";r.getMonth()+1==i&&r.getDate()==s&&(c="now"),null!=p&&p.getFullYear()==e&&p.getMonth()+1==i&&p.getDate()==s&&(c="active"),o[d]=s,n[d]={type:c,no:o[d]},s++}else o[d]=s-l,n[d]={type:"none",no:o[d]},s++;return{objs:n,nums:o}}(0,l,h)))):"monthly"==o.type?(l=t,c.find("tr").remove(),c.append(r(this,function(t){for(var e=[],i=[],n=new Date,o=1;o<=12;o++){var s="";n.getFullYear()==t&&n.getMonth()+1==o&&(s="now"),null!=p&&p.getFullYear()==t&&p.getMonth()+1==o&&(s="active"),i.push(o),e.push({type:s,no:o})}return{objs:e,nums:i}}(l)))):"yearly"==o.type&&(l=t,c.find("tr").remove(),c.append(r(this,function(t){for(var e=[],i=[],n=t-4,o=new Date,s=n;s<n+12;s++){var r="";o.getFullYear()==s&&(r="now"),null!=p&&p.getFullYear()==s&&(r="active"),i.push(s),e.push({type:r,no:s})}return{objs:e,nums:i}}(l)))),s.children(".title").html(a.dateFormat((i=this.options,n=null,"daily"==i.type?n=new Date(l+"/"+(h<10?"0"+h:h)+"/01"):"monthly"==i.type?n=new Date(l+"/01/01"):"yearly"==i.type&&(n=new Date),w(n)),o.titleFormat))}},this.prev=function(t,e){var i=this.options;if("daily"==i.type){if(e)var n=l-1,o=h;else n=1==h?l-1:l,o=1==h?12:h-1;if(f&&f.getFullYear()==l&&f.getMonth()+1==h)return;this.page(n,o)}else"monthly"==i.type?this.page(l-1):"yearly"==i.type&&this.page(l-12);this.emit("prev",[t])},this.next=function(t,e){var i=this.options;if("daily"==i.type){if(e)var n=l+1,o=h;else n=12==h?l+1:l,o=12==h?1:h+1;if(v&&v.getFullYear()==l&&v.getMonth()+1==h)return;this.page(n,o)}else"monthly"==i.type?this.page(l+1):"yearly"==i.type&&this.page(l+12);this.emit("next",[t])},this.select=function(){var t=this.options,e=arguments;if(0==e.length)y=l,m=h,d=null;else if(3==e.length)y=e[0],m=e[1],d=e[2];else if(1==e.length){var i=a.typeCheck("date",e[0])?e[0]:new Date(e[0]);y=i.getFullYear(),m=i.getMonth()+1,d=i.getDate()}if("daily"==t.type){if(f||v){var n=function(t,e,i){if(f){var n=f.getFullYear(),o=f.getMonth()+1,s=f.getDate();if(t<n||t==n&&e<o)return[n,o,s]}if(v){var r=v.getFullYear(),a=v.getMonth()+1,l=v.getDate();if(r<t||t==r&&a<e)return[r,a,l]}return[t,e,i]}(y,m,d);this.page(n[0],n[1]),this.addTrigger(u[n[2]],"click")}this.page(y,m),this.addTrigger(u[d],"click")}else"monthly"==t.type?(this.page(y),this.addTrigger(u[m],"click")):"yearly"==t.type&&(this.page(y),this.addTrigger(u[y],"click"))},this.addTime=function(t){p=new Date(this.getTime()+t),this.select(this.getTime())},this.getDate=function(){return p},this.getTime=function(){return p.getTime()},this.getFormat=function(t){return a.dateFormat(p,"string"==typeof t?t:this.options.format)},this.reload=function(){var t=this.options;f=a.typeCheck("date",t.minDate)?t.minDate:null,v=a.typeCheck("date",t.maxDate)?t.maxDate:null,"daily"==t.type&&(f&&t.date<f?t.date=f:v&&t.date>v&&(t.date=v)),this.select(),this.emit("reload")}};return t.setup=function(){return{type:"daily",titleFormat:"yyyy.MM",format:"yyyy-MM-dd",date:w(new Date),animate:!1,minDate:null,maxDate:null}},t}),jui.defineUI("ui.colorpicker",["jquery","util.base","util.color"],function(M,Y,_){var t=function(){var h,r,t,e,u,i,n,d,c,o,s,a,l,p,f,v,m,g,y,x,w,b,C,k,z,I,j=[{rgb:"#ff0000",start:0},{rgb:"#ffff00",start:.17},{rgb:"#00ff00",start:.33},{rgb:"#00ffff",start:.5},{rgb:"#0000ff",start:.67},{rgb:"#ff00ff",start:.83},{rgb:"#ff0000",start:1}],E={color_width:226,color_height:145,hue_width:157,opacity_width:119,dragBar_width:12,hueContainer_width:157,opacityDragBar_width:12};function D(t){var e=null;if("hex"==t)e=_.rgb(C.val()),k.val(e.r),z.val(e.g),I.val(e.b);else if("rgb"==t)C.val(_.format({r:parseInt(k.val(),10),g:parseInt(z.val(),10),b:parseInt(I.val(),10)},"hex")),e=_.rgb(C.val());else{var i=h.getColor("hex");C.val(i),e=_.rgb(C.val()),k.val(e.r),z.val(e.g),I.val(e.b)}e.a=V(),a.css("background-color",_.format(e,"hex")),v.val(Math.floor(100*e.a)+"%"),h.emit("change",[_.format(e,"hex"),e])}function N(t){var e=u.offset(),i=E.color_width,n=E.color_height,o=t.clientX-e.left,s=t.clientY-e.top;o<0?o=0:i<o&&(o=i),s<0?s=0:n<s&&(s=n),d.css({left:o-5,top:s-5}).data("pos",{x:o,y:s}),D()}function T(t){var e=l.offset().left,i=e+E.hueContainer_width,n=A(t).clientX;r=n<e?0:i<n?100:(n-e)/(i-e)*100;var o=E.hue_width*(r/100);c.css({left:o-Math.ceil(E.dragBar_width/2)+"px"}).data("pos",{x:o});var s=function(t){for(var e,i,n=0;n<j.length;n++)if(j[n].start>=t){e=j[n-1],i=j[n];break}return e&&i?_.scale().domain(e.rgb,i.rgb)((t-e.start)/(i.start-e.start),"hex"):null}(r/100);u.css("background-color",s),D()}function F(t){var e=p.offset().left,i=e+E.opacity_width,n=A(t).clientX;r=n<e?0:i<n?100:(n-e)/(i-e)*100;var o=E.opacity_width*(r/100);m.css({left:o-Math.ceil(E.opacityDragBar_width/2)+"px"}).data("pos",{x:o}),D()}function V(){var t=m.data("pos")||{x:0};return Math.round(t.x/E.opacity_width*100)/100}function $(t,e){var i=M("<"+(t=t||"div")+" />");return"object"==typeof e&&i.attr(e),i}function A(t){return Y.isTouch?t.originalEvent.touches[0]:t}function q(t){var e=t.which,i=!1;return 37!=e&&39!=e&&8!=e&&46!=e&&9!=e||(i=!0),!(!i&&(e<48||57<e))}function S(t){var e=k.val(),i=z.val(),n=I.val();""!=e&&""!=i&&""!=n&&(255<parseInt(e)?k.val(255):k.val(parseInt(e)),255<parseInt(i)?z.val(255):z.val(parseInt(i)),255<parseInt(n)?I.val(255):I.val(parseInt(n)),H(_.format({r:parseInt(k.val()),g:parseInt(z.val()),b:parseInt(I.val())},"hex"),"rgb"))}function H(t,e){var i=t||h.options.color,n=_.rgb(i);u.css("background-color",i);var o=_.RGBtoHSV(n.r,n.g,n.b),s=E.color_width*o.s,r=E.color_height*(1-o.v);d.css({left:s-5,top:r-5}).data("pos",{x:s,y:r});var a=E.hue_width*(o.h/360);c.css({left:a-7.5}).data("pos",{x:a});var l=E.opacity_width*(n.a||0);m.css({left:l-7.5}).data("pos",{x:l}),D(e)}this.init=function(){(h=this).options,t=M(this.root),u=$("div",{class:"color"}),d=$("div",{class:"drag-pointer"}),i=$("div",{class:"value"}),n=$("div",{class:"saturation"}),o=$("div",{class:"control"}),s=$("div",{class:"empty"}),a=$("div",{class:"color"}),e=$("div",{class:"hue"}),l=$("div",{class:"container"}),c=$("div",{class:"drag-bar"}),p=$("div",{class:"opacity"}),f=$("div",{class:"container"}),v=$("input",{class:"input",type:"text",disabled:!0}),m=$("div",{class:"drag-bar2"}),g=$("div",{class:"information"}),y=$("div",{class:"title"}).html("HEX"),x=$("div",{class:"title"}).html("R"),w=$("div",{class:"title"}).html("G"),b=$("div",{class:"title"}).html("B"),C=$("input",{class:"input",type:"text",maxlength:7}),k=$("input",{class:"input",type:"text",maxlength:3}),z=$("input",{class:"input",type:"text",maxlength:3}),I=$("input",{class:"input",type:"text",maxlength:3}),i.html(d),n.html(i),u.html(n),l.html(c),e.html(l),f.html(m),p.html(f),o.append(e),o.append(p),o.append(v),o.append(s),o.append(a),g.append(C),g.append(k),g.append(z),g.append(I),g.append(y),g.append(x),g.append(w),g.append(b),t.html(u),t.append(o),t.append(g),h.addEvent(u,"mousedown",function(t){u.data("isDown",!0),N(t)}),h.addEvent(u,"mouseup",function(t){u.data("isDown",!1)}),h.addEvent(c,"mousedown",function(t){t.preventDefault(),e.data("isDown",!0)}),h.addEvent(m,"mousedown",function(t){t.preventDefault(),p.data("isDown",!0)}),h.addEvent(l,"mousedown",function(t){e.data("isDown",!0),T(t)}),h.addEvent(f,"mousedown",function(t){p.data("isDown",!0),F(t)}),h.addEvent(C,"keydown",function(t){if(t.which<65||70<t.which)return q(t)}),h.addEvent(C,"keyup",function(t){var e=M(this).val();13==t.which&&("#"!=e.charAt(0)||7!=e.length&&4!=e.length||(H(e,"hex"),h.emit("enter",[e,_.rgb(e)])))}),h.addEvent(k,"keydown",q),h.addEvent(k,"keyup",S),h.addEvent(z,"keydown",q),h.addEvent(z,"keyup",S),h.addEvent(I,"keydown",q),h.addEvent(I,"keyup",S),h.addEvent(document,"mouseup",function(t){u.data("isDown",!1),e.data("isDown",!1),p.data("isDown",!1)}),h.addEvent(document,"mousemove",function(t){u.data("isDown")&&N(t),e.data("isDown")&&T(t),p.data("isDown")&&F(t)}),H()},this.setColor=function(t){if("object"==typeof t){if(!t.r||!t.g||!t.b)return;H(_.format(t,"hex"))}else if("string"==typeof t){if("#"!=t.charAt(0))return;H(t)}},this.getColor=function(t){var e,i,n,o,s,r,a,l,h=(e=d.data("pos")||{x:0,y:0},i=c.data("pos")||{x:0},n=E.color_width,o=E.color_height,s=i.x/E.hue_width*360,r=e.x/n,a=(o-e.y)/o,(l=_.HSVtoRGB(s,r,a)).a=V(),l);return t?("hex"==t&&h.a<1&&(t="rgb"),_.format(h,t)):h}};return t.setup=function(){return{type:"full",color:"#FF0000"}},t}),jui.defineUI("ui.dropdown",["jquery"],function(l){var h=function(){var t=i();null!=t&&t.hide()},i=function(){for(var t=jui.get("ui.dropdown"),e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++)if("show"==i[n].type)return i[n];return null};l(function(){document.addEventListener("click",function(t){var e=t.target.tagName;"LI"!=e&&"INPUT"!=e&&"A"!=e&&"BUTTON"!=e&&"I"!=e&&h()}),window.addEventListener("keydown",function(t){var e=i();null!=e&&e.wheel(t.which,function(){t.preventDefault()})})});var t=function(){var o=null,s=-1;function r(r){var a=l(o.menu).find("li");a.off("click").off("hover"),r.addEvent(a,"click",function(t){if(!(l(this).hasClass("divider")||l(this).hasClass("title")||l(this).hasClass("disabled"))){var e,i,n=(e=this,i=0,a.each(function(t){e==this&&(i=t)}),i),o=l(this).text(),s=l(this).attr("value");r.emit("change",[{index:n,value:s,text:o},t]),r.options.close&&h(),"A"==t.target.tagName&&t.preventDefault()}}),r.addEvent(a,"hover",function(t){a.removeClass("active")})}function a(t,e){var i=o.menu.find("li"),n=i.eq(s);i.removeClass("active"),""!=n.val()||""!=n.html()?(n.addClass("active"),0<t.options.height&&o.menu.scrollTop(s*n.outerHeight())):"function"==typeof e&&e()}this.init=function(){var t=this.options,e=l(this.root),i=e.find("ul"),n=e.find(".anchor");i=0==i.length?e:i,(o={root:e,menu:i,anchor:n}).root.outerWidth(o.menu.outerWidth()),0<t.width&&i.outerWidth(t.width),0<t.height&&i.css({maxHeight:t.height,overflow:"auto"}),0<t.left&&e.css("left",t.left),0<t.top&&e.css("top",t.top),i.css({display:"block"}),e.css({position:"absolute",display:"none"}),0<t.nodes.length?this.update(t.nodes):r(this),this.type="hide"},this.update=function(t){if(this.tpl.node){l(o.menu).empty();for(var e=0;e<t.length;e++)l(o.menu).append(this.tpl.node(t[e]));r(this)}},this.hide=function(){o.root.hide(),this.emit("hide"),this.type="hide"},this.show=function(t,e){h(),o.root.show(),0<o.anchor.length&&o.root.css("margin-top","10px"),2==arguments.length&&this.move(t,e),this.emit("show"),this.type="show"},this.move=function(t,e){o.root.css("left",t),o.root.css("top",e)},this.wheel=function(t,e){if(this.options.keydown){var i=this,n=o.menu.find("li");9!=t?(38!=t&&-1!=t||(s<1?s=n.length-1:s--,a(this,function(){s--,a(i)}),e&&e()),40!=t&&1!=t||(s<n.length-1?s++:s=0,a(i,function(){s++,a(i)}),e&&e()),13!=t&&0!=t&&t||(i.addTrigger(n.eq(s),"click"),s=-1,e&&e())):this.hide()}},this.reload=function(){this.init(),this.emit("reload")}};return t.setup=function(){return{close:!0,keydown:!1,left:0,top:0,width:0,height:0,nodes:[]}},t}),jui.defineUI("ui.modal",["jquery","util.base"],function(c,t){var o=0,s=0;t.resize(function(){if(o!=c(window).width()||s!=c(window).height()){for(var t=jui.get("ui.modal"),e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++)"show"==i[n].type&&i[n].resize();o=c(window).width(),s=c(window).height()}},300);var e=function(){var l={},h=null,i=null,n=null;function u(t){var e,i,n=t.options.target,o="body"==n?window:n,s="body"==n?"fixed":"absolute",r="body"==(e=n)?null:c(e).hasClass("msgbox")||c(e).hasClass("window")?"absolute":"relative",a=c(n).scrollLeft(),l=c(o).width()/2-c(t.root).width()/2+c(n).scrollLeft(),h=c(o).height()/2-c(t.root).height()/2,u=0<a?c(n).outerWidth()+a:"100%",d=c(n).outerHeight();null!=r?(d=d<(i=c(o)[0].scrollHeight)?i:d,h+=c(o).scrollTop()):d=(i=c(window).outerHeight())<d?d:i;return{x:l,y:h,pos:s,tPos:r,w:u,h:d}}this.init=function(){var t;i={position:c((t=this).root).css("position"),left:c(t.root).css("left"),top:c(t.root).css("top"),"z-index":c(t.root).css("z-index"),display:c(t.root).css("display")},n={position:c(t.options.target).css("position")},this.options.clone||c(this.root).hide(),this.type="hide"},this.hide=function(){var t=this.options,e=this.timestamp;t.clone&&(h.remove(),h=null),c(t.target).css("position",n.position),c(this.root).css(i),l[e]&&(l[e].remove(),delete l[e]),this.type="hide"},this.show=function(){var e,t,i,n,o,s,r=this.options,a=u(this);r.clone&&(h=c(this.root).clone()).insertAfter(c(this.root)),c(this.root).appendTo(r.target),this.resize(),c(r.target).css("position",a.tPos),c(this.root).show(),e=this,t=a.w,i=a.h,n=e.options,o=e.timestamp,s=null!=n.parent?n.parent:n.target,null==l[o]&&(l[o]=c("<div id='MODAL_"+e.timestamp+"'></div>").css({position:"absolute",width:t,height:i,left:0,top:0,opacity:e.options.opacity,"background-color":e.options.color,"z-index":5e3+e.options.index-1}),c(s).append(l[o]),c(e.root).insertAfter(l[o]),e.addEvent(l[o],"click",function(t){return e.options.autoHide&&e.hide(),!1})),this.type="show"},this.resize=function(){var t=u(this),e=this.timestamp;c(this.root).css({position:t.pos,left:t.x,top:t.y,"z-index":5e3+this.options.index}),null!=l[e]&&l[e].height(t.h)}};return e.setup=function(){return{color:"black",opacity:.4,target:"body",parent:null,index:0,clone:!1,autoHide:!0}},e}),jui.defineUI("ui.notify",["jquery"],function(d){var t=function(){var h=null,u=null;this.init=function(){var t=this.options,e="object"==typeof t.padding?12:t.padding;return u={top:{top:e,bottom:"auto",left:e,right:e},"top-right":{top:e,bottom:"auto",left:"auto",right:e},"top-left":{top:e,bottom:"auto",left:e,right:"auto"},bottom:{top:"auto",bottom:e,left:e,right:e},"bottom-right":{top:"auto",bottom:e,left:"auto",right:e},"bottom-left":{top:"auto",bottom:e,left:e,right:e}}[t.position],"object"==typeof t.padding&&(u=d.extend(u,t.padding)),"body"!=this.selector&&d(this.selector).css("position","relative"),h=d("<div></div>").css(d.extend({position:"absolute","z-index":3e3},u)),d(this.root).append(h),this},this.add=function(e,t){var i=this,n=this.options,o=isNaN(t)?n.timeout:t,s=d(this.root).scrollTop(),r=d(this.tpl.item(e)).css({"margin-bottom":n.distance});"top"!=n.position&&"bottom"!=n.position||r.outerWidth(h.width()-3*("object"==typeof n.padding&&n.padding.right?n.padding.right:12)),-1!=n.position.indexOf("top-")?(h.css("top",s+u.top),h.prepend(r)):(h.css("bottom",-(s-u.bottom)),h.append(r));var a=r.css("opacity");function l(){null!=r&&(r.animate({opacity:0},n.hideDuration,n.hideEasing),r.slideUp(n.hideEasing,function(){i.emit("hide",[e]),r.remove(),r=null}))}r.css({opacity:0}).animate({opacity:a},n.showDuration,n.showEasing,function(){i.emit("show",[e])}),this.addEvent(r,"click",function(t){return i.emit("select",[e,t]),l(),!1}),0<o&&setTimeout(l,o)},this.reset=function(){h.empty()}};return t.setup=function(){return{position:"top-right",padding:12,distance:5,timeout:3e3,showDuration:500,hideDuration:500,showEasing:"swing",hideEasing:"linear"}},t}),jui.defineUI("ui.paging",["jquery"],function(c){var t=function(){var h=1,u=1,d=null;function e(t,e){var i,n,o,s=[],r=u<t.options.screenCount?u:t.options.screenCount,a=e-Math.ceil(r/2)+1;if(h=u<e?u:e,h=e<1?1:e,u<(a=a<1?1:a)+r){for(var l=u-r+1;l<u+1;l++)s.push(l);u<h&&(h=u)}else for(l=a;l<a+r;l++)s.push(l);d.html(t.tpl.pages({pages:s,lastPage:u})),(i=t).addEvent(c(i.root).find(".prev"),"click",function(t){return i.prev(),!1}),i.addEvent(c(i.root).find(".next"),"click",function(t){return i.next(),!1}),(n=t).addEvent(d.find(".page"),"click",function(t){var e=parseInt(c(t.currentTarget).text());return n.page(e),!1}),o=h,d.find(".page").each(function(t){c(this).text()==o?c(this).addClass("active"):c(this).removeClass("active")})}this.init=function(){this.options;return d=0==(d=c(this.root).find(".list")).length?c(this.root):d,this.reload(),this},this.reload=function(t){t=t||this.options.count;h=1,u=Math.ceil(t/this.options.pageCount),e(this,h),this.emit("reload")},this.page=function(t){if(!t)return h;e(this,t),this.emit("page",[h])},this.next=function(){this.page(h+1)},this.prev=function(){this.page(h-1)},this.first=function(){this.page(1)},this.last=function(){this.page(u)}};return t.setup=function(){return{count:0,pageCount:10,screenCount:5}},t}),jui.defineUI("ui.tooltip",["jquery"],function(d){var t=function(){var h=null,u={},n="",o=null;function s(t,e){h=d(t.tpl.item({timestamp:t.timestamp,position:t.options.position,color:t.options.color,message:e})),t.options.width&&h.css("max-width",t.options.width),t.options.align&&h.css("text-align",t.options.align),d("body").append(h),function(t){var e=d(t.root).offset(),i=d(t.root).outerWidth(),n=d(t.root).outerHeight(),o=h.outerWidth(),s=h.outerHeight(),r=0,a=0,l=t.options.position;"left"==l?(r=e.left-o,a=e.top-(s-n)/2):"right"==l?(r=e.left+i,a=e.top-(s-n)/2):"bottom"==l?(r=e.left-o/2+i/2,a=e.top+n):(r=e.left-o/2+i/2,a=e.top-s);u={x:r<1?1:r,y:a<1?1:a}}(t)}function r(t,e){clearTimeout(o),null!=h&&(h.remove(),h=null,u={}),null!=o&&(t.emit("hide",[e]),o=null)}this.init=function(){var e=this,i=this.options;n=d(this.root).attr("title"),d(this.root).removeAttr("title"),d(this.root).off(i.showType).off(i.hideType),this.addEvent(this.root,i.showType,function(t){return null==o?o=setTimeout(function(){!function(t,e){h&&r(t,e);var i=t.options.title?t.options.title:n;""!=i&&(s(t,i),h.css({left:u.x,top:u.y}))}(e,t),null!=h&&e.emit("show",[h.get(0),t])},i.delay):i.showType==i.hideType&&r(e,t),!1}),i.showType!=i.hideType&&this.addEvent(this.root,i.hideType,function(t){return r(e,t),!1})},this.update=function(t){n=t,null!=h&&h.find(".message").html(n)}};return t.setup=function(){return{color:"null",position:"top",width:150,align:"left",delay:0,showType:"mouseover",hideType:"mouseout",title:"",tpl:{item:"<div class='tooltip <!= position !>' <! if(color != null) { !>style='background-color: <!= color !>'<! } !>><div class='anchor'></div><div class='message'><!= message !></div></div>"}}},t}),jui.defineUI("ui.layout",["jquery","util.base"],function(c,t){var e=function(){var h=null,u={},l=["top","left","right","bottom","center"],e={top:"n-resize",bottom:"n-resize",right:"e-resize",left:"e-resize"};function i(n,o,e,s){n.mousedown(function(t){n.data("mousedown",!0);var i=n.clone();n.data("shadow",i),n.after(i),e.call(this,t),i.css("opacity",.3),c(document).on("mousemove",o),c(document).on("mouseup",function t(e){c(document).off("mousemove",o),c(document).off("mouseup",t),s.call(this,e),n.data("mousedown",!1),i.remove(),c("body :not(.resize)").css({"user-select":""})}),c("body :not(.resize)").css({"user-select":"none"})})}function d(t){var a,l;a=h[t],(l=a.resizer).css({cursor:e[t]}),l.data("event")||("top"==t?i(l,function(t){if(l.data("mousedown")){var e=t.clientY-l.data("current"),i=u.top.min,n=u.top.max;i<=e&&e<n&&l.css({top:e+"px"})}},function(t){var e=l.position().top;l.data("current",t.clientY-e)},function(t){var e=l.position().top,i=(l.height(),e),n=e+l.height()+"px",o=h.top.height();h.top.height(i);var s=o-i,r=h.center.height()+s;h.center.css({top:n}).height(r),h.left.css({top:n}).height(r),h.left.resizer.css({top:n}).height(r),h.right.css({top:n}).height(r),h.right.resizer.css({top:n}).height(r)}):"bottom"==t?i(l,function(t){if(l.data("mousedown")){var e=t.clientY-l.data("current"),i=u.bottom.min,n=u.bottom.max,o=a.position().top-(e+u.barSize)+a.height();i<=o&&o<=n&&l.css({top:e+"px"})}},function(t){var e=l.position().top;l.data("current",t.clientY-e)},function(t){var e=l.position().top+l.height(),i=(h.root.height(),parseFloat(h.bottom.position().top)-e);h.bottom.css({top:e+"px"}),h.bottom.height(h.bottom.height()+i);var n=h.center.height()-i;h.center.height(n),h.left.height(n),h.left.resizer.height(n),h.right.height(n),h.right.resizer.height(n)}):"left"==t?i(l,function(t){if(l.data("mousedown")){var e=t.clientX-l.data("current"),i=u.left.min,n=u.left.max;i<=e&&e<n&&l.css({left:e+"px"})}},function(t){var e=l.position().left;l.data("left",e).data("current",t.clientX-e)},function(t){if(l.data("mousedown")){var e=l.position().left,i=l.data("left")-e;h.left.css({width:e+"px"}),h.center.css({left:e+u.barSize+"px"}),h.center.width(h.center.width()+i)}}):"right"==t&&i(l,function(t){if(l.data("mousedown")){var e=t.clientX-l.data("current"),i=u.right.min,n=u.right.max,o=h.left.width()+h.left.resizer.width(),s=h.center.width(),r=a.width()-(e-(o+s));i<=r&&r<n&&l.css({left:e+"px"})}},function(t){var e=l.position().left;l.data("left",e).data("current",t.clientX-e)},function(t){if(l.data("mousedown")){var e=l.position().left,i=l.data("left")-e;h.right.css({left:e+l.width()+"px",width:h.right.width()+i+"px"}),h.center.width(h.center.width()-i)}}),l.data("event",!0))}this.init=function(){var t,e,i,n,o,s,r=this,a=this.options;return t=c(this.root).css("position","relative"),null!=a.width&&t.outerWidth(a.width),null!=a.height&&t.outerHeight(a.height),0==(e=a.top.el?c(a.top.el):t.find("> .top")).length&&(e=null),0==(i=a.left.el?c(a.left.el):t.find("> .left")).length&&(i=null),0==(n=a.right.el?c(a.right.el):t.find("> .right")).length&&(n=null),0==(o=a.bottom.el?c(a.bottom.el):t.find("> .bottom")).length&&(o=null),0==(s=a.center.el?c(a.center.el):t.find("> .center")).length&&(s=null),h={root:t,top:e,left:i,right:n,bottom:o,center:s},u=a,function(t){for(var e=0,i=l.length;e<i;e++){var n=h[l[e]];n&&(h.root.append(n),"center"!=l[e]&&u[l[e]].resize&&(n.resizer||(n.resizer=c("<div class='resize "+l[e]+"' />")),h.root.append(n.resizer),d(l[e])))}t.resize()}(this),c(window).on("resize",function(t){r.resize()}),this},this.resize=function(){var t=null,e=null,i=0,n=0;t=h.top,e=this.options.top,t&&(t.css({position:"absolute",top:"0px",left:"0px",width:"100%",height:e.size||e.min}),i=t.height(),e.resize?(t.resizer.css({position:"absolute",top:i,left:"0px",width:"100%",background:this.options.barColor,height:this.options.barSize}),i+=this.options.barSize):t.resizer&&t.resizer.remove()),t=h.bottom,e=this.options.bottom;var o=h.root.height();if(t){t.css({position:"absolute",left:"0px",width:"100%",height:e.size||e.min});var s=i-t.height()+i;e.resize?(t.resizer.css({position:"absolute",top:s,left:"0px",width:"100%",background:this.options.barColor,height:this.options.barSize}),s+=this.options.barSize):t.resizer&&t.resizer.remove(),t.css("top",s+"px")}t=h.left,e=this.options.left;var r=o;h.top&&(r-=h.top.height(),h.top.resizer&&(r-=h.top.resizer.height())),h.bottom&&(r-=h.bottom.height(),h.bottom.resizer&&(r-=h.bottom.resizer.height())),t&&(t.css({position:"absolute",top:i,left:"0px",height:r,width:e.size||e.min,"max-width":"100%",overflow:"auto"}),n=t.width(),e.resize?(t.resizer.css({position:"absolute",top:i,height:t.height(),left:n,background:this.options.barColor,width:this.options.barSize}),n+=this.options.barSize):t.resizer&&t.resizer.remove()),t=h.right,e=this.options.right;var a=h.root.width();h.left&&(a-=h.left.width(),h.left.resizer&&(a-=h.left.resizer.width())),t&&(t.css({position:"absolute",top:i,height:r,width:e.size||e.min,"max-width":"100%"}),e.resize?(t.resizer.css({position:"absolute",top:i,height:t.height(),background:this.options.barColor,width:this.options.barSize}),this.options.barSize):t.resizer&&t.resizer.remove(),a-=h.right.width(),h.right.resizer&&(a-=h.right.resizer.width()),t.resizer.css({left:n+a+"px"}),t.css({left:n+a+t.resizer.width()+"px"})),t=h.center,e=this.options.center,t&&t.css({position:"absolute",top:i,height:r,left:n,width:a,overflow:"auto"})}};return e.setup=function(){return{barColor:"#d6d6d6",barSize:3,width:null,height:null,top:{el:null,size:null,min:50,max:200,resize:!0},left:{el:null,size:null,min:50,max:200,resize:!0},right:{el:null,size:null,min:50,max:200,resize:!0},bottom:{el:null,size:null,min:50,max:200,resize:!0},center:{el:null}}},e}),jui.defineUI("ui.accordion",["jquery","util.base"],function(a,l){var t=function(){var n,o=null,s=null;function r(e){o.each(function(t){e==t?(a(this).addClass("active"),n.options.multipanel?a(this).next(".content").show():s.insertAfter(this).show()):(a(this).removeClass("active"),n.options.multipanel&&a(this).next(".content").hide())})}this.init=function(){var i,t=(n=this).options;if(o=a(this.root).find(".title"),s=a(this.root).find(".content"),null==t.index)for(var e=0;e<o.length;e++)a(o[e]).hasClass("active")&&(t.index=e);l.typeCheck("integer",t.index)?r(t.index):s.hide(),i=this,o.each(function(e){i.addEvent(this,"click",function(t){a(this).hasClass("active")&&i.options.autoFold?(a(this).removeClass("active"),i.options.multipanel?a(this).next(".content").hide():s.hide(),i.emit("fold",[e,t])):(r(e),i.emit("open",[e,t]))})}),this.emit("init")},this.activeIndex=function(){return 0}};return t.setup=function(){return{index:null,autoFold:!1,multipanel:!1}},t}),jui.defineUI("ui.switch",["jquery","util.base"],function(l,t){var e=function(){function a(t,e){var i=l(t).find("."+e);return i.length||(i=l("<div />").addClass(e)),i}this.init=function(){var e=this,t=this.options,i=a(this.root,"left"),n=a(this.root,"right"),o=a(this.root,"area"),s=a(this.root,"bar"),r=a(this.root,"handle");s.html(i),s.append(n),o.html(s),l(this.root).html(o).append(r),this.addEvent(this.root,t.toggleEvent,function(t){e.toggle()}),t.checked&&l(this.root).addClass("on")},this.getValue=function(){return l(this.root).hasClass("on")},this.setValue=function(t){l(this.root).toggleClass("on",!!t),this.emit("change",[t])},this.toggle=function(){this.setValue(!this.getValue())}};return e.setup=function(){return{checked:!1,toggleEvent:"click"}},e}),jui.defineUI("ui.slider",["jquery","util.base","util.math"],function(l,D,h){var t=function(){var u,d,c,p,e,f,v,m,i,n,g,y,x,w;function b(){return u.options.min}function C(){return u.options.max}function o(){return u.options.type}function k(){return"double"==o()}function z(){return 0!=e.data("tooltip")&&u.options.tooltip}function r(t){return D.isTouch?t.originalEvent.touches[0]:t}function I(t,e){return t[0].style[e]}function j(){if("single"==o())d?n.height(I(v,"bottom")).css({bottom:0}):n.width(I(v,"left"));else if(d){var t=parseFloat(I(m,"bottom").replace("%","")),e=parseFloat(I(v,"bottom").replace("%",""));n.height(t-e+"%").css({bottom:e+"%"})}else{t=parseFloat(I(m,"left").replace("%","")),e=parseFloat(I(v,"left").replace("%",""));n.width(t-e+"%").css({left:e+"%"})}}function a(t,e){var i=E(t/100);i<b()&&(i=b()),i>C()&&(i=C()),i=E((t=function(t,e){var i;if(k())if("from"==e)d?(i=parseFloat(I(m,"bottom").replace("%","")))<=t&&(t=i):(i=parseFloat(I(m,"left").replace("%","")))<=t&&(t=i);else if("to"==e){var n;d?t<=(n=parseFloat(I(v,"bottom").replace("%","")))&&(t=n):t<=(n=parseFloat(I(v,"left").replace("%","")))&&(t=n)}return t}(t=(i-b())/(C()-b())*100,e))/100);var n=t+"%",o="to"==e?m:v;if(d?o.css({bottom:n}):o.css({left:n}),j(),z()){var s="from"==e?g:x,r="from"==e?y:w;if(D.typeCheck("function",u.options.format)&&(i=u.options.format.call(u,i)),r.html(i),d)s.css({bottom:f.height()*(t/100),"margin-bottom":s.height()/2*-1});else{s.css({left:n,"margin-left":s.width()/2*-1});var a=f.width()*(t/100),l=a+s.width()/2,h=a-s.width()/2;l>=f.width()?s.css({left:f.width()-s.width()+o.width()/2,"margin-left":0}).addClass("last"):h<=0?s.css({left:-o.width()/2,"margin-left":0}).addClass("first"):s.removeClass("first last")}s.show()}"from"==e?c!=i&&(u.emit("change",[{type:e,from:i,to:u.getToValue()}]),c=i):"to"==e&&p!=i&&(u.emit("change",[{type:e,from:u.getFromValue(),to:i}]),p=i)}function s(t,e){var i,n,o,s=void 0;"vertical"==u.options.orient?(n=(i=f.offset().top-l("body").scrollTop())+f.height(),s=(o=r(t).clientY)<=i?100:n<=o?0:(n-o)/(n-i)*100):(n=(i=f.offset().left)+f.width(),s=(o=r(t).clientX)<i?0:n<o?100:(o-i)/(n-i)*100),a(s,e)}function E(t){void 0===t&&(t=d?parseFloat(v.css("bottom"))/f.height():parseFloat(v.css("left"))/f.width());var e=b(),i=e+(C()-e)*t,n=u.options.step,o=h.remain(i,n);return i=h.minus(i,o),o>h.div(n,2)&&(i=h.plus(i,n)),i}function t(){e.addClass(u.options.orient),f=l("<div class='track' />"),i=l("<div class='tooltip-track' />"),n=l("<div class='progress' />"),0!=e.data("progress")&&u.options.progress||n.hide(),v=l("<div class='handle from' />"),f.html(n),f.append(v),k()&&(m=l("<div class='handle to' />"),f.append(m));var t=d?"right":"top";g=l('<div class="tooltip '+t+'"><div class="message" /></div>').hide(),y=g.find(".message"),x=l('<div class="tooltip '+t+'"><div class="message" /></div>').hide(),w=x.find(".message"),i.html(g),i.append(x),e.html(f),e.append(i),z()&&e.addClass("has-tooltip")}this.init=function(){e=l((u=this).root),d="vertical"==this.options.orient,t(),u.addEvent(v,"mousedown",function(t){v.data("select",!0),l("body").addClass("slider-cursor")}),k()&&u.addEvent(m,"mousedown",function(t){m.data("select",!0),l("body").addClass("slider-cursor")}),u.addEvent(f,"mousedown",function(t){l("body").addClass("slider-cursor"),"single"==u.options.type&&(v.data("select",!0),s(t,"from"))}),u.addEvent("body","mouseup",function(t){v.data("select",!1),"double"==u.options.type&&m.data("select",!1),l("body").removeClass("slider-cursor")}),u.addEvent("body","mousemove",function(t){v.data("select")?s(t,"from"):"double"==u.options.type&&m.data("select")&&s(t,"to")}),this.setFromValue(),this.setToValue()},this.setFromValue=function(t){a(((t||e.data("from")||this.options.from)-b())/(C()-b())*100,"from")},this.setToValue=function(t){k()&&a(((t||e.data("to")||this.options.to)-b())/(C()-b())*100,"to")},this.getFromValue=function(){return E()},this.getToValue=function(){return k()?E(d?parseFloat(m.css("bottom"))/f.height():parseFloat(m.css("left"))/f.width()):E()}};return t.setup=function(){return{type:"single",orient:"horizontal",min:0,max:10,step:1,from:0,to:10,tooltip:!0,format:null,progress:!0}},t}),jui.defineUI("ui.progress",["jquery","util.base"],function(l,t){var e=function(){var n,t,e,o;function s(){return n.options.min}function r(){return n.options.max}function a(){return n.options.orient}function i(){t.addClass(a()).addClass(n.options.type),e=t.find(".area"),o=t.find(".bar"),0==e.length&&(e=l("<div class='area' />"),t.html(e)),0==o.length&&(o=l("<div class='bar' />"),e.html(o)),n.setValue(),n.setStriped(),n.setAnimated()}this.init=function(){t=l((n=this).root),i()},this.setAnimated=function(t){void 0===t?o.toggleClass("animated",n.options.animated):o.toggleClass("animated",t)},this.setStriped=function(t){void 0===t?o.toggleClass("striped",n.options.striped):o.toggleClass("striped",t)},this.setValue=function(t){var e,i=((t=void 0===t?n.options.value:t)-s())/(r()-s())*100;e=i,"vertical"==a()?o.height(e+"%"):o.width(e+"%")},this.getValue=function(){return s()+(r()-s())*(parseFloat(("vertical"==a()?o.css("height"):o.css("width")).replace("%",""))/100)}};return e.setup=function(){return{type:"",orient:"horizontal",min:0,max:100,value:0,striped:!1,animated:!1}},e}),jui.defineUI("ui.autocomplete",["jquery","util.base","ui.dropdown"],function(a,t,l){var e=function(){var o=null,s=null,r=[],i=[];function n(i,t){if(0!=t.length){o&&a(o.root).remove();var e=a(i.root).position(),n=a(i.tpl.words({words:t}));a(i.options.parent).append(n),o=l(n,{keydown:!0,width:a(i.root).outerWidth(),height:i.options.height,left:e.left,top:e.top+a(i.root).outerHeight(),event:{change:function(t,e){a(s).val(t.text),i.emit("change",[t.text,e])}}}),0<i.options.dx||0<i.options.dy?o.show(i.options.dx,i.options.dy):o.show()}else o&&o.hide()}function e(e){e.addEvent(s,"keyup",function(t){if(38!=t.which&&40!=t.which&&13!=t.which)return i=function(t){var e=[];if(""!=t)for(var i=0;i<r.length;i++){var n=r[i],o=r[i].toLowerCase(),s=t.toLowerCase();-1!=o.indexOf(s)&&e.push(n)}return e}(a(this).val()),n(e,i),!1}),e.options.showAll&&e.addEvent(s,"focus",function(t){if(""==a(this).val())return n(e,i=r),!1})}this.init=function(){var t=this.options;s=null==t.target?this.root:a(this.root).find(t.target),e(this),this.update(t.words)},this.update=function(t){r=t},this.close=function(){o&&o.hide()},this.list=function(){return i}};return e.setup=function(){return{parent:"body",target:null,words:[],showAll:!1,dx:0,dy:0,height:"auto"}},e}),jui.defineUI("ui.tab",["jquery","util.base","ui.dropdown"],function(f,t,r){var e=function(){var h=null,s=null,u=-1,d=0;function n(t){f(t.root).children("li").eq(u).removeClass("checked")}function c(t,e){f(t.root).children("li").removeClass("active");var i=f(t.root).children("li").eq(e).addClass("active");s.appendTo(i),p(t.options.target,i[0])}function p(t,e,i){var n=f(e).find("[href*=#]").attr("href");f(t).children("*").each(function(t){"#"+this.id==n?f(this).show():f(this).hide()})}function o(l){f(l.root).children("li").each(function(a){f(this).hasClass("menu")&&(u=a),l.addEvent(this,["click","contextmenu"],function(t){if(f(this).hasClass("disabled"))return!1;var e,i,n,o=f.trim(f(this).text()),s=f(this).val();if(a!=u){if(a!=d){var r=[{index:a,text:o,value:s},t];""!=l.options.target&&p(l.options.target,this),d=a,l.emit("change",r),l.emit("click",r),c(l,a)}}else l.emit("menu",[{index:a,text:o},t]),"show"!=h.type&&(e=l,n=f(i=this).offset(),f(i).addClass("checked"),h.show(n.left,n.top+f(e.root).height()));return!1})}),function(t){var e=f(t.root).children("li"),i=e.filter(".active"),n=e.eq(d),o=1==i.length?i:n;(o.hasClass("disabled")||0==o.length)&&(o=e.eq(0),d=0);s.appendTo(o),c(t,e.index(o))}(l),function(i){if(!i.options.drag)return;var n=f(i.root).children("li"),o=null,s=null,r=null,a=null;n.each(function(e){i.addEvent(this,"mousedown",function(t){return o=f(this),s=o.clone().css("opacity","0.5"),r=e,i.emit("dragstart",[r,t]),!1}),i.addEvent(this,"mousemove",function(t){null!=r&&((a=e)<r?0==a?s.insertBefore(n.eq(0)):s.insertAfter(n.eq(a-1)):a==n.length-1?s.insertAfter(n.eq(a)):s.insertBefore(n.eq(a+1)),o.hide())})}),i.addEvent(i.root,"mouseup",function(t){null!=o&&o.show(),null!=s&&s.remove(),null!=r&&null!=a&&(i.move(r,a),i.emit("dragend",[a,t])),a=r=null})}(l)}this.init=function(){var i=this,t=this.options;if(d=t.index,s=f("<div class='anchor'></div>"),0<t.nodes.length?this.update(t.nodes):o(this),this.tpl.menu){var e=f(this.tpl.menu());f("body").append(e),h=r(e,{event:{change:function(t,e){n(i),i.emit("changemenu",[t,e])},hide:function(){n(i)}}})}return this},this.update=function(t){if(this.tpl.node){f(this.root).empty();for(var e=0;e<t.length;e++)f(this.root).append(this.tpl.node(t[e]));o(this)}},this.insert=function(t,e){if(this.tpl.node){var i=this.tpl.node(e),n=f(this.root).children("li");t==n.length?f(i).insertAfter(n.eq(t-1)):f(i).insertBefore(n.eq(t)),o(this)}},this.append=function(t){if(this.tpl.node){var e=this.tpl.node(t);-1!=u?(f(e).insertBefore(f(this.root).find(".menu")),u++):f(this.root).append(e),o(this)}},this.prepend=function(t){this.tpl.node&&(f(this.root).prepend(this.tpl.node(t)),o(this))},this.remove=function(t){f(this.root).children("li").eq(t).remove(),o(this)},this.move=function(t,e){if(t!=e){var i=f(this.root).children("li"),n=i.eq(t);e<t?0==e?n.insertBefore(i.eq(0)):n.insertAfter(i.eq(e-1)):e==i.length-1?n.insertAfter(i.eq(e)):n.insertBefore(i.eq(e+1)),d=e,o(this)}},this.show=function(t){if(t!=u&&t!=d){var e=f(this.root).children("li").eq(t);e.hasClass("disabled")||(d=t,this.emit("change",[{index:t,text:f.trim(e.text()),value:e.val()}]),c(this,t))}},this.enable=function(t){t!=u&&t!=d&&f(this.root).children("li").eq(t).removeClass("disabled")},this.disable=function(t){t!=u&&t!=d&&f(this.root).children("li").eq(t).addClass("disabled")},this.activeIndex=function(){return d}};return e.setup=function(){return{target:"",index:0,drag:!1,nodes:[]}},e}),jui.define("ui.tree.node",["jquery"],function(a){return function(t,e){var i=this;function n(t){i.nodenum=isNaN(t)?i.nodenum:t,i.parent&&(null==i.parent.index?i.index=""+i.nodenum:i.index=i.parent.index+"."+i.nodenum),i.parent&&"string"==typeof i.index&&(i.depth=i.index.split(".").length),0<i.children.length&&function t(e){for(var i=e.children,n=0;n<i.length;n++)i[n].reload(n),0<i[n].children.length&&t(i[n])}(i)}function o(){if(!e)return i.element;try{var t=a(e(a.extend({node:{index:i.index,data:i.data,depth:i.depth}},i.data))).get(0)}catch(t){console.log(t)}return t}function s(t){a(t.element).remove();for(var e=0;e<t.children.length;e++){var i=t.children[e];0<i.children.length?s(i):a(i.element).remove()}}function r(t){for(var e=0;e<t.children.length;e++){var i=t.children[e];i.reload(e),0<i.children.length&&r(i)}}this.data=t,this.element=null,this.index=null,this.nodenum=null,this.parent=null,this.children=[],this.depth=0,this.type="open",this.reload=function(t,e){if(n(t),null!=this.element){var i=o();e?a(i).insertAfter(this.element):a(this.parent.element).children("ul").append(i),a(this.element).remove(),this.element=i}else this.element=o()},this.reloadChildrens=function(){r(this)},this.destroy=function(){null!=this.parent?this.parent.removeChild(this.index):(s(this),a(this.element).remove())},this.isLeaf=function(){return 0==this.children.length},this.fold=function(){a(this.element).children("ul").hide(),this.type="fold"},this.open=function(){a(this.element).children("ul").show(),this.type="open"},this.appendChild=function(t){a(this.element).children("ul").append(t.element),this.children.push(t)},this.insertChild=function(t,e){0==t?0==this.children.length?a(this.element).children("ul").append(e.element):a(e.element).insertBefore(this.children[0].element):a(e.element).insertAfter(this.children[t-1].element);var i=this.children.splice(0,t);i.push(e),this.children=i.concat(this.children),r(this)},this.removeChild=function(t){for(var e=0;e<this.children.length;e++){var i=this.children[e];i.index==t&&(this.children.splice(e,1),s(i))}r(this)},this.lastChild=function(){return 0<this.children.length?this.children[this.children.length-1]:null},this.lastChildLeaf=function(t){var e=t||this.lastChild();return e.isLeaf()?e:this.lastChildLeaf(e.lastChild())}}}),jui.define("ui.tree.base",["jquery","util.base","ui.tree.node"],function(t,e,a){return function(t){var l=this,h=null,r=t.$obj,o=t.$tpl,u=e.index();function d(t,e,i){var n=new a(t,o.node);return n.parent=i||null,n.reload(e),n}function s(t,e){var i=e.children;if(0<i.length)for(var n=0;n<i.length;n++)t.push(i[n]),0<i[n].children.length&&s(t,i[n])}this.appendNode=function(){var t,e,i,n,o=arguments[0],s=arguments[1];return s?(t=o,e=s,i=l.getNode(t),n=d(e,i.children.length,i),i.appendChild(n),n):function(t){if(null==h)h=d(t),r.tree.append(h.element);else{var e=d(t,h.children.length,h);h.appendChild(e)}return e}(o)},this.insertNode=function(t,e){return 0==h.children.length&&0==parseInt(t)?this.appendNode(e):(i=t,n=e,o=u.getIndexList(i),s=l.getNodeParent(i),r=o[o.length-1],a=d(n,r,s),s.insertChild(r,a),a);var i,n,o,s,r,a},this.updateNode=function(t,e){var i=this.getNode(t);for(var n in e)i.data[n]=e[n];return i.reload(i.nodenum,!0),i.reloadChildrens(),i},this.removeNode=function(t){this.getNode(t).destroy()},this.removeNodes=function(){var t=h.children;if(0<t.length){var e=t.pop();e.parent=null,e.destroy(),this.removeNodes()}},this.openNode=function(t){null==t?this.getRoot().open():this.getNode(t).open()},this.foldNode=function(t){null==t?this.getRoot().fold():this.getNode(t).fold()},this.openNodeAll=function(t){for(var e=this.getNodeAll(t),i=0;i<e.length;i++)e[i].open();null==t&&this.getRoot().open()},this.foldNodeAll=function(t){for(var e=this.getNodeAll(t),i=0;i<e.length;i++)e[i].fold();null==t&&this.getRoot().fold()},this.moveNode=function(t,e){if(t!=e&&!function t(e,i){var n=u.getParentIndex(i);return null!=n&&(e==n||t(e,n))}(t,e)){var i=this.getNode(t),n=this.getNodeParent(e),o=u.getIndexList(e),s=o[o.length-1];if(!function(t,e){for(var i=[];;){var n=e.parent;if(!n)break;i.push(n),e=n}for(var o=0;o<i.length;o++)if(t==i[o])return!0;return!1}(i,n)){i.parent.children.splice(i.nodenum,1),i.parent.reloadChildrens();var r=(i.parent=n).children.splice(0,s);r.push(i),n.children=r.concat(n.children),n.reloadChildrens()}}},this.getNode=function(t){if(null==t)return h.children;var e=h.children;if(u.isIndexDepth(t)){var i=u.getIndexList(t);return function t(e,i){if(!i)return null;var n=e.shift();return null==n?i:t(e,i.children[n])}(i,e[i.shift()])}return e[t]?e[t]:null},this.getNodeAll=function(t){for(var e=[],i=null==t?h.children:[this.getNode(t)],n=0;n<i.length;n++)i[n]&&(e.push(i[n]),0<i[n].children.length&&s(e,i[n]));return e},this.getNodeParent=function(t){var e=u.getIndexList(t);return 1==e.length?h:2==e.length?this.getNode(e[0]):2<e.length?(e.pop(),this.getNode(e.join("."))):void 0},this.getRoot=function(){return h}}}),jui.defineUI("ui.tree",["util.base","ui.tree.base"],function(d,c){var t=function(){var r={start:null,end:null,clone:null},i=null,a=d.index();function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];$(n.element).removeClass("open fold leaf last"),n.parent&&n.isLeaf()?$(n.element).addClass("leaf"):"open"==n.type?($(n.element).addClass("open"),n.open()):($(n.element).addClass("fold"),n.fold()),n.parent?n.parent.lastChild()==n&&$(n.element).addClass("last"):$(n.element).addClass("root"),$(n.element).children("i:first-child").remove(),$(n.element).prepend($("<i></i>"))}}function o(t,e,i){if(null==e)if(t.options.rootHide){for(var n=t.uit.getRoot().children,o=0;o<n.length;o++)i(n[o].index);u(t,!1)}else i(e),u(t,!0);else i(e),u(t,!1)}function s(n,t){for(var e=0;e<t.length;e++)!function(e){var i=$(e.element);n.addEvent(i.children("i:first-child"),"click",function(t){"open"==e.type?n.fold(e.index,t):n.open(e.index,t),t.stopPropagation()}),n.addEvent(i.children("a,span,div")[0],"click",function(t){i.hasClass("disabled")||i.attr("disabled")||(n.emit("select",[e,t]),n.emit("change",[e,t]),t.stopPropagation())})}(t[e])}function l(t,e){if(t.options.drag){var i=t.uit.getRoot();e||(r.start=null,r.end=null,r.clone=null),$(i.element).find("li.hover").removeClass("hover")}}function h(e,t,i,n){if(e.options.drag){var o=n?a.getNextIndex(t.index):t.index,s=$("<div class='drag'></div>").attr("data-index",o).css(i).outerWidth($(t.element).outerWidth());$(e.root).append(s),e.addEvent(s,"mouseover",function(t){r.start&&(r.end=o,s.addClass("on"),l(e,!0))}),e.addEvent(s,"mouseout",function(t){r.start&&s.removeClass("on")})}}function u(t,e){var i=t.listAll();n(0,i),s(t,i),function(o,t){if(o.options.drag){for(var i=o.uit.getRoot(),e=0;e<t.length;e++)!function(n){$(n.element).off("mousedown").off("mouseup"),o.addEvent(n.element,"mousedown",function(t){if("I"!=t.target.tagName)return null==r.start&&!1!==o.emit("dragstart",[n,t])&&(r.start=n.index),!1}),o.addEvent(n.element,"mouseup",function(t){if("I"!=t.target.tagName){if(!1!==o.options.dragChild&&r.start&&r.start!=n.index){var e=n.lastChild(),i=e?a.getNextIndex(e.index):n.index+".0";!1!==o.emit("dragend",[o.get(n.index),t])&&o.move(r.start,i)}return l(o),!1}}),o.addEvent(n.element,"mouseover",function(t){if("I"!=t.target.tagName)return!1!==o.options.dragChild&&r.start&&r.start!=n.index&&!1!==o.emit("dragover",[n,t])&&(l(o,!0),$(n.element).addClass("hover")),!1}),o.addEvent(i.element,"mouseup",function(t){if("I"!=t.target.tagName){if(!1!==o.options.dragChild&&r.start){var e=""+i.children.length;o.move(r.start,e),o.emit("dragend",[o.get(e),t])}return l(o),!1}})}(t[e]);o.addEvent("body","mouseup",function(t){return r.start&&r.end&&(o.move(r.start,r.end),o.emit("dragend",[o.get(r.end),t])),l(o),!1})}}(t,i),function(t){if(t.options.drag){$(t.root).find(".drag").remove();for(var e=t.listAll(),i=0;i<e.length;i++){var n=e[i],o=$(n.element).position();0<o.top&&h(t,n,o)}}}(t),function(t){if(t.options.drag)for(var e=t.listAll(),i=0;i<e.length;i++){var n=e[i],o=$(n.element).position();0<o.top&&n.parent&&n.parent.lastChild()==n&&(o.top=o.top+$(n.element).outerHeight(),h(t,n,o,!0))}}(t),e&&(n(0,[t.uit.getRoot()]),s(t,[t.uit.getRoot()]))}this.init=function(){var t=this.options;if(this.uit=new c({$obj:{tree:$(this.root)},$tpl:this.tpl}),!t.root)throw new Error("JUI_CRITICAL_ERROR: root data is required");if(this.uit.appendNode(t.root),u(this,!0),t.rootHide){var e=this.uit.getRoot();$(e.element).css("padding-left","0px"),$(e.element).children("*:not(ul)").hide()}t.rootFold&&this.fold()},this.update=function(t,e){var i=1==arguments.length?t:e;if(null!=(t=2==arguments.length?t:null))this.uit.updateNode(t,i);else{var n=d.index();this.uit.removeNodes();for(var o=0;o<i.length;o++){var s=n.getParentIndex(i[o].index);null==s?this.uit.appendNode(i[o].data):this.uit.appendNode(s,i[o].data)}}u(this)},this.append=function(){var t=1==arguments.length?arguments[0]:arguments[1],e=2==arguments.length?arguments[0]:null;t=null==t.length?[t]:t;for(var i=0;i<t.length;i++)null!=e?this.uit.appendNode(e,t[i]):this.uit.appendNode(t[i]);u(this)},this.insert=function(t,e){for(var i=null==e.length?[e]:e,n=0;n<i.length;n++)this.uit.insertNode(t,i[n]);u(this)},this.select=function(t){var e=null==t?this.uit.getRoot():this.get(t);return $(this.root).find("li").removeClass("active"),$(e.element).addClass("active"),i=t,e},this.unselect=function(){if(null!=i){var t=this.get(i);return $(t.element).removeClass("active"),i=null,t}},this.remove=function(t){this.uit.removeNode(t),u(this)},this.reset=function(){this.uit.removeNodes(),u(this)},this.move=function(t,e){this.uit.moveNode(t,e),u(this)},this.open=function(t,e){if(null!=t||!this.options.rootHide){var i=null==t;this.uit.openNode(t),u(this,i),this.emit("open",[i?this.uit.getRoot():this.get(t),e])}},this.fold=function(t,e){if(null!=t||!this.options.rootHide){var i=null==t;this.uit.foldNode(t),u(this,i),this.emit("fold",[i?this.uit.getRoot():this.get(t),e])}},this.openAll=function(t){var e=this,i=null==t;o(this,t,function(t){e.uit.openNodeAll(t)}),this.emit("openall",[i?this.uit.getRoot():this.get(t)])},this.foldAll=function(t){var e=this,i=null==t;o(this,t,function(t){e.uit.foldNodeAll(t)}),this.emit("foldall",[i?this.uit.getRoot():this.get(t)])},this.list=function(){return this.uit.getNode()},this.listAll=function(){return this.uit.getNodeAll()},this.listParents=function(t){var e=this.get(t),i=[];return e.parent&&function t(e){null!=e.index&&(i.push(e),null!=e.parent&&t(e.parent))}(e.parent),i.reverse()},this.get=function(t){return null==t?null:this.uit.getNode(t)},this.getAll=function(t){return null==t?null:this.uit.getNodeAll(t)},this.activeIndex=function(){return i}};return t.setup=function(){return{root:null,rootHide:!1,rootFold:!1,drag:!1,dragChild:!0}},t}),jui.defineUI("ui.window",["jquery","util.base","ui.modal"],function(f,t,v){var e=function(){var a=null,l=null,h={},u={},d={},c=null;function p(){var t=d.$foot.length<1?5:d.$foot.outerHeight();d.$body.outerHeight(d.$root.outerHeight()-d.$head.outerHeight()-t)}this.init=function(){var e=this,t=this.options,i=f(this.root),n=f(this.root).children(".head"),o=f(this.root).children(".body"),s=f(this.root).children(".foot");if(t.modal&&(t.move=!1,t.resize=!1),a=t.layerIndex,d={$root:i,$head:n,$body:o,$foot:s},i.css(f.extend({position:"absolute"},t)).appendTo(f("body")),t.move&&this.addEvent(n,"mousedown",function(t){l=i,h.check=!0,h.disX=t.pageX-l.offset().left,h.disY=t.pageY-l.offset().top}),t.resize&&(i.append("<i class='icon-resize resize'></i>"),this.addEvent(i.children(".resize"),"mousedown",function(t){return l=i,u.check=!0,u.disX=l.width()+l.offset().left,u.disWidth=l.width(),u.disY=l.height()+l.offset().top,u.disHeight=l.height(),!1})),t.modal||e.addEvent(i,"mousedown",function(t){i.css("z-index",++a),t.stopPropagation()}),this.addEvent(n.find(".close"),"click",function(t){return e.hide(),!1}),this.addEvent("body","mousemove",function(t){if(h.check){var e=t.pageX-h.disX,i=t.pageY-h.disY;f(l).css({left:e+"px",top:i+"px"})}if(u.check){var n=t.pageX-u.disX,o=t.pageY-u.disY;l.width(u.disWidth+n),l.height(u.disHeight+o),p()}}),this.addEvent("body","mouseup",function(t){h.check&&e.emit("move",t),u.check&&e.emit("resize",t),h.check=!1,u.check=!1}),this.type="hide",i.hide(),t.modal){var r=0<t.modalIndex?{index:t.modalIndex}:{};c=v(e.root,f.extend({autoHide:!1},r))}},this.hide=function(){c?c.hide():d.$root.hide(),this.emit("hide"),this.type="hide"},this.show=function(t,e){c?c.show():d.$root.show(),(t||e)&&this.move(t,e),this.emit("show"),this.type="show",p()},this.move=function(t,e){d.$root.css("left",t),d.$root.css("top",e)},this.update=function(t){d.$body.empty().html(t)},this.setTitle=function(t){d.$head.find(".title").empty().html(t)},this.setSize=function(t,e){d.$root.width(t),d.$root.height(e),p()},this.resize=function(){p()},this.resizeModal=function(){c&&c.resize()}};return e.setup=function(){return{width:400,height:300,left:"auto",top:"auto",right:"auto",bottom:"auto",modal:!1,move:!0,resize:!0,modalIndex:0,layerIndex:2e3,animate:!1}},e}),jui.defineUI("ui.property",["jquery","util.base"],function(x,l){var t=function(){var n,m,g,s=[],a={};function e(t){for(var e=0,i=s.length;e<i;e++)t.call(g,s[e],e)}function y(e,i,n){var o;return function(){var t=arguments;clearTimeout(o),o=setTimeout(function(){o=null,e.apply(n,t)},i)}}this.init=function(){n=x((g=this).root),m=x("<div class='property-table' />").css({position:"relative"}),n.append(m),this.loadItems(this.options.items)},this.loadItems=function(t){s=l.clone(t),this.initProperty(),this.emit("load.items")},this.initProperty=function(){m.empty(),e(function(t,e){m.append(this.renderItem(t,e))})},this.addItem=function(t){l.typeCheck("array",t)||(t=[t]),s=s.concat(t),this.initProperty()},this.removeItem=function(t){for(var e=[],i=0,n=s.length;i<n;i++){var o=s[i];o.key!=t.key&&o.title!=t.title||e.push(o)}s=e},this.getGroupList=function(){var e=[];return m.find(".property-header-item").each(function(){var t=x(this).data("item");e.push({name:t.title,id:x(this).attr("id")})}),e},this.collapsed=function(t){var e=n.find("#"+t);e.addClass("collapsed").removeClass("expanded"),e.find(".expand-btn i").removeClass("icon-minus").addClass("icon-plus");for(var i=e.next();i.length&&!i.hasClass("property-header-item");)i.hide(),i=i.next()},this.expanded=function(t){var e=n.find("#"+t);e.removeClass("collapsed").addClass("expanded"),e.find(".expand-btn i").removeClass("icon-plus").addClass("icon-minus");for(var i=e.next();i.length&&!i.hasClass("property-header-item");)i.show(),i=i.next()},this.renderItem=function(t,e){var i=x("<div class='property-item' />").attr("data-index",e);if("group"==t.type){i.addClass("property-header-item expanded"),i.attr("id","property-header-item-"+e),i.data("item",t);var n=x("<div class='property-header' />").html(t.title);t.description&&n.append("<small class='description'>"+t.description+"</small>"),n.append("<a class='expand-btn'><i class='icon-minus' ></i></a>"),i.on("click",function(t){x(this).hasClass("collapsed")?g.expanded(i.attr("id")):g.collapsed(i.attr("id"))}),i.append(n)}else{(l.typeCheck("array",t.value)||t.vertical)&&i.addClass("vertical"),i.attr("data-key",t.key);n=x("<div class='property-title'  />").html(t.title);var o=x("<div class='property-render'  />"),s=this.render(i,t);o.append(x("<div class='item' />").html(s)),t.description&&o.append("<div class='description' >"+t.description+"</div>"),i.append(n),i.append(o)}return i},this.render=function(t,e){var i=e.type||"text";return(e.render||a[i]||a.defaultRenderer)(t,e)},this.getValue=function(t){return t?this.getItem(t).value:this.getAllValue()},this.getDefaultValue=function(){for(var t={},e=0,i=this.options.items;e<i;e++){var n=this.options.items[e];void 0!==n.value&&(t[n.key]=n.value)}return t},this.initValue=function(t){e(function(t,e){t.value=""}),this.initProperty(),t&&this.setValue(t)},this.setValue=function(t){if(t=t||{},Object.keys(t).length)for(var e in t)this.updateValue(e,t[e])},this.findRender=function(t){return this.findItem(t).find(".property-render .item")},this.findItem=function(t){return m.find("[data-key='"+t+"']")},this.getItem=function(t){return l.typeCheck("number",t)?s[t]:l.typeCheck("string",t)?s[parseInt(this.findItem(t).attr("data-index"))]:s[parseInt(t.attr("data-index"))]},this.updateValue=function(t,e){var i=this.findItem(t),n=this.getItem(t);if(n){n.value=e;var o=this.findRender(t);o.empty(),o.html(this.render(i,n))}},this.getAllValue=function(t){var i={};return e(function(t,e){"group"!==t.type&&(i[t.key]=t.value)}),i},this.refreshValue=function(t,e){var i=this.getItem(t),n=i.value;i.value=e,this.emit("change",[i,e,n])},a.str2array=function(t,e){return e=e||",","string"==typeof t?t.split(e):t},a.defaultRenderer=function(t,e){return a.text(t,e)},a.select=function(t,e){for(var i=x("<select />").css({"max-width":"100%"}),n=e.items||[],o=0,s=n.length;o<s;o++){var r=n[o];"string"==typeof r&&(r={text:r,value:r}),i.append(x("<option >").val(r.value).text(r.text))}return i.val(e.value),i.on("change",y(function(){var t=x(this).val();t=l.typeCheck("array",e.value)?a.str2array(t):t,g.refreshValue(x(this).closest(".property-item"),t)},250,i)),i},a.text=function(e,i){var t=x("<input type='text' />").css({width:"100%"}).attr({placeholder:"Type here"});return i.readonly&&$input.attr("readonly",!0),t.val(i.value),t.on("input",y(function(){var t=x(this).val();t=l.typeCheck("array",i.value)?a.str2array(t):t,g.refreshValue(e,t)},250,t)),x([t[0]])},a.textarea=function(t,e){var i=x("<textarea />").css({width:"100%",height:e.height||100}).attr({placeholder:"Type here"});return e.readonly&&i.attr("readonly",!0),i.val(e.value),i.on("input",y(function(){var t=x(this).val();t=l.typeCheck("array",e.value)?a.str2array(t):t,g.refreshValue(x(this).closest(".property-item"),t)},250,i)),i},a.html=function(t,e){var i=x("<div class='html' contenteditable=true />").css({width:"100%",height:e.height||100});return e.readonly&&i.attr("contenteditable",!1),i.html(e.value),i.on("input",y(function(){var t=x(this).html();g.refreshValue(x(this).closest(".property-item"),t)},250,i)),i},a.number=function(t,e){var i=x("<input type='number' />").css({"text-align":"center"});return i.attr("max",e.max||100),i.attr("min",e.min||0),i.attr("step",e.step||1),i.val(e.value),i.on("input",y(function(){g.refreshValue(x(this).closest(".property-item"),+x(this)[0].value)},250,i)),i},a.range=function(t,e){var i=x("<div />").css({position:"relative"}),n=x("<input type='range' />").css({width:"100px","z-index":1});value=e.value;var o=e.postfix||"";e.postfix&&(value=value.replace(o,"")),n.attr("max",e.max||100),n.attr("min",e.min||0),n.attr("step",e.step||1),n.val(+value),e.readonly&&n.attr("readonly",!0);var s=x("<div class='range-progress' />");s.width(value/(+n.attr("max")-+n.attr("min"))*n.width());var r=x("<span />");return r.text(value+o),n.on("input",function(){var t=x(this),e=+t[0].value,i=e/(+t.attr("max")-+t.attr("min"))*x(this).width();s.width(i),r.text(e+o)}),n.on("input",y(function(){var t=x(this),e=+t[0].value;g.refreshValue(t.closest(".property-item"),e+o)},250,n)),i.append([n,s,r]),i},a.checkbox=function(e,t){var i=x("<input type='checkbox' /><i ></i>");return x(i[0]).hide(),i[0].checked="true"==t.value||!0===t.value,i[0].checked?x(i[1]).addClass("icon-checkbox"):x(i[1]).addClass("icon-checkbox2"),i.on("click",y(function(){var t=x(this).hasClass("icon-checkbox");t?x(this).addClass("icon-checkbox2").removeClass("icon-checkbox"):x(this).addClass("icon-checkbox").removeClass("icon-checkbox2"),t=!t,g.refreshValue(e,t)},100,i)),i},a.switch=function(e,t){var i=x("<div class='switch inner small' />"),n="true"==t.value||!0===t.value;return jui.create("ui.switch",i,{checked:n,event:{change:function(t){g.refreshValue(e,t)}}}),i},a.property=function(t,e){var i=x("<div class='property inner' />");return jui.create("ui.property",i,{items:e.items,event:{change:function(){g.refreshValue(t,this.getValue())}}}).setValue(e.value),i},a.date=function(i,t){var r=m,a=x("<div class='datepicker-input' />"),n=x("<span class='datepicker-value-text'></span>").css({cursor:"pointer"});a.on("click",function(){var t=a.offset(),e=r.offset(),i=r.outerWidth(),n=r.outerHeight(),o=t.left-e.left;o+a.outerWidth()>=i&&(o=i-a.outerWidth()-20);var s=t.top-e.top+80;s+a.outerHeight()>=n&&(s=n-a.outerHeight()-20),l.css({position:"absolute","z-index":1e5,left:o,top:s}),l.show()});var e=x("<i class='icon-calendar' />");a.html(e),a.append(n);var l=x("<div class='datepicker' />").css({position:"absolute",top:"0px",display:"none"}),o=x("<div class='head' />"),s=x("<table class='body' />");o.html('<div class="prev"><i class="icon-chevron-left"></i></div><div class="title"></div><div class="next"><i class="icon-chevron-right"></i></div>'),s.html("<tr><th>SU</th><th>MO</th><th>TU</th><th>WE</th><th>TH</th><th>FR</th><th>SA</th></tr>"),l.append(o),l.append(s),r.after(l);var h=jui.create("ui.datepicker",l,{date:t.value||+new Date,titleFormat:t.titleFormat||"yyyy. MM",format:t.format||"yyyy/MM/dd",tpl:{date:t.tpl_date||"<td><!= date !></td>"},event:{select:function(t,e){n.html(t),g.refreshValue(i,t)}}});return x("body").on("click",function(t){var e=x(t.target).closest(".datepicker"),i=x(t.target).closest(a);e.length||i.length||l.hide()}),n.html(h.getDate()),a},a.colors=function(t,e){for(var i=[],n=0,o=e.value.length;n<o;n++){var s=a.color(t,e,n);i.push(s[0])}return x(i)},a.color=function(t,h,u){u=void 0===u?-1:u;var d=x("<a  class='color-input' />"),c=m,p=-1==u?h.value:h.value[u],f=x("<span />").css({"background-color":p}).html("&nbsp;"),v=x("<span />").html(p||""),e=x("<span class='none-color' title='Delete a color'/>").html("<i class='icon-more'></i>");return d.append(f),d.append(v),d.append(e),d.on("click",function(t){if(x(t.target).closest(".none-color").length)return t.preventDefault(),f.css("background-color",""),v.text(""),void g.refreshValue(d.closest(".property-item"),"");var e=x(this).offset(),n=c.next(".colorpicker");if(n.length)n[0].jui.setColor(p||"");else{n=x('<div class="colorpicker" />'),c.after(n);var o=jui.create("ui.colorpicker",n,{color:p,event:{change:y(function(){var t=o.getColor("hex");if(!(-1<t.indexOf("NAN")))if(f.css("background-color",t),v.html(t),-1==u)g.refreshValue(d.closest(".property-item"),t);else{var e=h.value;e[u]=t,g.refreshValue(d.closest(".property-item"),e)}},100,o)}});x("body").on("click",function(t){var e=x(t.target).closest(".colorpicker"),i=x(t.target).closest(d);e.length||i.length||(!function(t){var e=jui.getAll(),i=0;for(len=e.length;i<len&&e[i][0]!=t;i++);jui.remove(i)}(o),n.remove())})}var i=c.offset(),s=c.outerWidth(),r=c.outerHeight(),a=e.left-i.left;a+n.outerWidth()>=s&&(a=s-n.outerWidth()-20);var l=e.top-i.top+50;l+n.outerHeight()>=r&&(l=r-n.outerHeight()-20),n.css({position:"absolute","z-index":1e5,left:a,top:l}),n.show()}),d}};return t.setup=function(){return{sort:"group",viewport:"default",items:[]}},t}),jui.defineUI("ui.select",["jquery","util.base"],function(o,h){var t=function(){var t,e,s,r,a=[],l={divider:function(t,e){return o("<hr class='item divider' />")},item:function(t,e){var i=o('<div class="item option " />');i.attr("data-index",e),i.attr("value",t.value);var n=t.text?"text":"html";return"function"==typeof t[n]?i[n].call(i,t[n].call(t,this)):(i.text(t.text),i[n].call(i,t[n])),t.selected&&i.addClass("selected"),i}};this.init=function(){e=o((t=this).root),a=h.clone(this.options.items),e.hasClass("select")||e.addClass("select"),this.initSelect(),this.initEvent(),this.update(a)},this.initEvent=function(){e.on("click",".title",function(){e.toggleClass("open")}),e.on("click",".item.option",function(){t.setValue(o(this).attr("value"))}),o("body").on("click",function(t){o(t.target).closest(e).length||e.removeClass("open")})},this.initSelect=function(){s=o("<div class='title' />"),r=o("<div class='items' />"),s.append(o("<span />").addClass("title-content")),s.append(o("<i class='icon-arrow2' ></i>")),e.addClass("select-"+this.options.align),e.addClass("select-"+this.options.valign),this.options.multi&&e.addClass("multi"),e.append(s).append(r)},this.render=function(){s.find(".title-content").empty(),r.empty();for(var t=0,e=a.length;t<e;t++){var i=a[t],n=i.type||"item",o=l[n].call(null,i,t);r.append(o)}},this.setValue=function(t){var e=0;if(this.options.multi){t instanceof Array||(t=[t]);e=0;for(var i=t.length;e<i;e++)r.find("[value='"+t[e]+"']").toggleClass("selected")}else{var n=r.find(".selected"),o=n.attr("value");n.removeClass("selected"),r.find("[value='"+t+"']").addClass("selected")}this.setTitle(),this.emit("change",[this.getValue(),o])},this.getValue=function(){var t=r.find(".selected").map(function(){return o(this).attr("value")}).toArray();return this.options.multi?t:t[0]},this.setSelectedIndex=function(t){a[t]&&this.setValue(a[t].value)},this.getSelectedIndex=function(){return+r.find(".selected").data("index")||-1},this.setTitle=function(){var t=r.find(".selected").map(function(){return o("<span class='item-view'>"+o(this).html()+"</span>")[0]}).toArray();if(0==t.length)var e=this.options.placeholder;else e=o(t);s.find(".title-content").html(e)},this.update=function(t){for(var e=0,i=(a=h.clone(t)).length;e<i;e++){var n=a[e];"string"==typeof n&&(a[e]={text:n,value:n}),n.selected&&e}this.render(),this.setTitle()}};return t.setup=function(){return{items:[],placeholder:"Select a item",align:"left",valign:"top",multi:!1,modal:!1}},t}),jui.defineUI("ui.splitter",["jquery"],function(m){var t=function(){var s,o,r,n,a,l,h,e,u,d,c,p=[];function f(){return"vertical"==u}function i(t){if(f()){var e=t.clientX-r.data("prevClientX"),i=parseFloat(r.css("left"))+e;i=s.caculateMinSize(i),r.css("left",i+"px"),p[1].css("left",i+l+"px"),p[0].css("width",i+"px"),d=i,r.data("prevClientX",t.clientX)}else{var n=t.clientY-r.data("prevClientY"),o=parseFloat(r.css("top"))+n;o=s.caculateMinSize(o),r.css("top",o+"px"),p[1].css("top",o+l+"px"),p[0].css("height",o+"px"),d=o,r.data("prevClientY",t.clientY)}}function v(){m(document).off("mousemove",i),m(document).off("mouseup",v),n.css("user-select",""),n.find("iframe").css("pointer-events","auto"),s.emit("move.done",[r])}this.init=function(){o=m((s=this).root),a=this.options.barSize,u=this.options.direction,d=this.options.initSize,h=this.options.minSize,c=this.options.fixed,"number"==typeof h&&(h=[h,h]);for(var t=[],e=0,i=this.options.items.length;e<i;e++)p[e]=o.find(this.options.items[e]),p[e].css({position:"absolute",width:"auto",height:"auto",top:0,right:0,bottom:0,left:0}),t[e]=p[e][0];n=m(t),this.initElement(),this.initEvent()},this.initElement=function(){o.css({position:"absolute",width:"100%",height:"100%",overflow:"hidden"}),r&&r.length&&r.remove(),(r=f()?m("<div  />").css({position:"absolute",top:"0px",width:a,bottom:"0px",cursor:"ew-resize"}):m("<div />").css({position:"absolute",left:"0px",height:a,right:"0px",cursor:"ns-resize"})).addClass(this.options.splitterClass),r.css(this.options.barStyle),l=f()?r.outerWidth():r.outerHeight(),o.append(r),this.initResize()},this.getSize=function(t,e){return"string"==typeof t&&-1<t.indexOf("%")?e*(parseFloat(t.replace("%",""))/100):t},this.getShowList=function(){for(var t=[],e=0,i=n.length;e<i;e++){m(n[e]).hasClass(s.options.hideClass)||t.push(n[e])}return m(t)},this.caculateMinSize=function(t){return f(),t<l+h[0]?t=l+h[0]:t>e-l-h[1]&&(t=e-l-h[1]),t},this.initResize=function(){var t=this.getShowList();if(1==t.length)t.css({left:"0px",width:"auto",height:"auto",right:0,top:0,bottom:0}),r.hide();else{if(f()){var e=o.width(),i=this.caculateMinSize(this.getSize(d,e));p[0].css({left:"0px",width:i+"px",top:0,bottom:0}),p[1].css({left:i+l+"px",right:"0px",width:"auto",top:0,bottom:0}),r.css({left:i+"px"})}else{var n=o.height();i=this.caculateMinSize(this.getSize(d,n));p[0].css({top:"0px",height:i+"px",width:"auto",left:0,right:0,bottom:"auto"}),p[1].css({top:i+l+"px",bottom:"0px",width:"auto",left:0,right:0}),r.css({top:i+"px"})}r.show()}},this.initEvent=function(){!0!==c&&o.on("mousedown","> ."+this.options.splitterClass,function(t){n.css("user-select","none"),n.find("iframe").css("pointer-events","none"),f()?(e=o.width(),r.data("prevClientX",t.clientX)):(e=o.height(),r.data("prevClientY",t.clientY)),m(document).on("mousemove",i),m(document).on("mouseup",v)})},this.setDirection=function(t){u=t,this.initElement()},this.setInitSize=function(t){d=t,this.initResize()},this.setHide=function(t){m(n[t]).hide().addClass(s.options.hideClass),this.initResize()},this.setShow=function(t){m(n[t]).show().removeClass(s.options.hideClass),this.initResize()},this.toggle=function(t){m(n[t]).hasClass(s.options.hideClass)?this.setShow(t):this.setHide(t)}};return t.setup=function(){return{splitterClass:"ui-splitter",hideClass:"hide",barSize:4,barStyle:{"background-color":"#f6f6f6","border-right":"1px solid #e4e4e4"},direction:"vertical",initSize:"50%",minSize:30,items:[],fixed:!1}},t}),jui.defineUI("ui.timepicker",["jquery"],function(x){var t=function(){var d,c,p=null;function f(t,e){var i=new Date(t,e,0);return{min:{year:d,month:1,date:1,hours:0,minutes:0},max:{year:c,month:12,date:i.getDate(),hours:23,minutes:59}}}function v(t){return t<10?"0"+t:t}function m(t){var e=t||window.event,i=e.keyCode||e.which;i=String.fromCharCode(i);/[0-9]|\./.test(i)||(e.returnValue=!1,e.preventDefault&&e.preventDefault())}function g(t,e,i,n,o){var s,r,a,l,h,u,d;o||x(t).focus(),s=t,r=e,(a=parseInt(x(s).val())+(r||0))<0&&(a=0),x(s).val(v(a)),l=t,h=i,u=n,d=parseInt(x(l).val()),isNaN(d)?x(l).val(v(h)):(u<d&&x(l).val(u),d<h&&x(l).val(v(h)))}function y(t){var e=x(t.target).parent(),i=0,n=p.attr("class"),o=f(e.children(".year").val(),e.children(".month").val());38==t.which?i=1:40==t.which&&(i=-1),0!=i&&g(t.target,i,o.min[n],o.max[n])}this.init=function(){var t,e,i,n,o,s,r,a,l,h,u;return d=this.options.minYear,c=this.options.maxYear,e=(t=this).options.year,i=t.options.month,n=t.options.date,o=t.options.hours,s=t.options.minutes,r=x(t.root).children(".year").attr("maxlength",4),a=x(t.root).children(".month").attr("maxlength",2),l=x(t.root).children(".date").attr("maxlength",2),h=x(t.root).children(".hours").attr("maxlength",2),u=x(t.root).children(".minutes").attr("maxlength",2),r.on("keypress",m),r.on("keyup",y),r.on("focusout",function(t){g(this,0,d,c,!0)}),r.on("focus",function(t){(p=r).select()}),a.on("keypress",m),a.on("keyup",y),a.on("focusout",function(t){g(this,0,1,12,!0)}),a.on("focus",function(t){(p=a).select()}),l.on("keypress",m),l.on("keyup",y),l.on("focusout",function(t){g(this,0,1,f(r.val(),a.val()).max.date,!0)}),l.on("focus",function(t){(p=l).select()}),h.on("keypress",m),h.on("keyup",y),h.on("focusout",function(t){g(this,0,0,23,!0)}),h.on("focus",function(t){(p=h).select()}),u.on("keypress",m),u.on("keyup",y),u.on("focusout",function(t){g(this,0,0,59,!0)}),u.on("focus",function(t){(p=u).select()}),r.val(e),a.val(v(i)),l.val(v(n)),h.val(v(o)),u.val(v(s)),p=0==r.size()?h:r,function(t){var e=x(t.root).children("i"),i=x("<div></div>"),n=x("<div></div>"),o=x(t.root).children(".year"),s=x(t.root).children(".month");if(x(t.root).children(".date"),x(t.root).children(".hours"),x(t.root).children(".minutes"),!(0<o.size())){var r=x(t.root).outerHeight()/2,a={position:"absolute",width:r,height:r,cursor:"pointer",right:e.css("right")};i.css(x.extend({top:"0px"},a)),n.css(x.extend({top:r+"px"},a)),i.on("click",function(t){var e=p.attr("class"),i=f(o.val(),s.val());g(p[0],1,i.min[e],i.max[e])}),n.on("click",function(t){var e=p.attr("class"),i=f(o.val(),s.val());g(p[0],-1,i.min[e],i.max[e])}),x(t.root).append(i),x(t.root).append(n)}}(this),this},this.setYear=function(t){g(x(this.root).children(".year").val(t)[0],0,d,c)},this.getYear=function(){return parseInt(x(this.root).children(".year").val())},this.setMonth=function(t){g(x(this.root).children(".month").val(t)[0],0,1,12)},this.getMonth=function(){return parseInt(x(this.root).children(".month").val())},this.setDate=function(t){var e=f(this.getYear(),this.getMonth());g(x(this.root).children(".date").val(t)[0],0,1,e.max.date)},this.getDate=function(){return parseInt(x(this.root).children(".date").val())},this.setHours=function(t){g(x(this.root).children(".hours").val(t)[0],0,0,23)},this.getHours=function(){return parseInt(x(this.root).children(".hours").val())},this.setMinutes=function(t){g(x(this.root).children(".minutes").val(t)[0],0,0,59)},this.getMinutes=function(){return parseInt(x(this.root).children(".minutes").val())}};return t.setup=function(){var t=new Date;return{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),minYear:2015,maxYear:2020}},t}),jui.defineUI("ui.numberchecker",["jquery"],function(p){var t=function(){function d(t,e){return!!(e?/^[-]?\d+$/:/^[-]?\d+(?:[.]\d+)?$/).test(t)}function c(t,e,i,n){t=n?parseInt(t):parseFloat(t);return{min:e=n?parseInt(e):parseFloat(e),max:i=n?parseInt(i):parseFloat(i),value:t}}this.init=function(){var t,e,i,n,o,s,r=this.root,a=this.options.integer,l=this.options.empty,h=this.options.message,u=(e=p((t=this).root),(i=t.options).integer,n=e.attr("min")||"",o=e.attr("max")||"",s=e.val()||"",{min:null!=i.min?i.min:n,max:null!=i.max?i.max:o,value:s});return d(u.value,a)?p(r).val(u.value):p(r).addClass("invalid").val("").attr("placeholder",h),a||p(r).attr("step","any"),p(r).attr("min",u.min),p(r).attr("max",u.max),p(r).on("input",function(t){var e=p(r).val();if(d(e,a)){var i=c(e,u.min,u.max,a);""!==u.min&&""!==u.max&&e>=i.min&&e<=i.max&&(u.value=i.value),""!==u.min&&""===u.max&&e>=i.min&&(u.value=i.value),""===u.min&&""!==u.max&&e<=i.max&&(u.value=i.value)}}),p(r).on("focus",function(t){p(r).removeClass("invalid").attr("placeholder","")}),p(r).on("focusout",function(t){var e=p(r).val();if(d(e,a)){var i=c(e,u.min,u.max,a);""!==u.min&&i.value<i.min?p(r).val(i.min):""!==u.max&&i.value>i.max?p(r).val(i.max):p(r).val(i.value)}else null!=l?p(r).val(u[l]):p(r).addClass("invalid").val("").attr("placeholder",h)}),this}};return t.setup=function(){return{integer:!0,empty:null,min:null,max:null,message:"Invalid number"}},t}),jui.defineUI("ui.stringchecker",["jquery"],function(u){var t=function(){var l={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/,color:/#?([A-Fa-f0-9]){3}(([A-Fa-f0-9]){3})?/};function r(e,i,t,n){if(t.validJson){var o='{ "key":"'+i+'" }';try{JSON.parse(o)}catch(t){return n&&h(e,e.emit("invalid",["json",i])),!1}}if(t.validBlank&&""==u.trim(i)&&h(e,e.emit("invalid",["blank"])),null!=t.pattern){if("string"==typeof t.pattern){var s=!1,r=t.pattern.toLowerCase(),a=l[r];return null!=a&&(s=a.test(i)),!s&&n&&h(e,e.emit("invalid",[r,i])),s}if("object"==typeof t.pattern)return!(s=a.test(i))&&n&&h(e,e.emit("invalid",["regex",i])),s}return-1!=t.minLength&&i.length<t.minLength&&h(e,e.emit("invalid",["min",i])),-1!=t.maxLength&&i.length>t.maxLength&&h(e,e.emit("invalid",["max",i])),!0}function a(t){return{value:t=""+t}}function h(t,e){if("string"==typeof e&&""!=e)u(t.root).attr("placeholder",e);else{var i=t.options.message;"string"==typeof i&&""!=i&&u(t.root).attr("placeholder",i)}u(t.root).addClass("invalid").val("")}this.init=function(){var t,e,i,n=this,o=this.root,s=(e=u((t=this).root),i=t.options,{value:e.val()||"",validJson:i.validJson,validBlank:i.validBlank,minLength:i.minLength,maxLength:i.maxLength,pattern:i.pattern});return u(o).on("input",function(t){var e=u(o).val();if(r(n,e,s,!1)){var i=a(e);s.value=i.value}}),u(o).on("focus",function(t){u(o).removeClass("invalid").attr("placeholder","")}),u(o).on("focusout",function(t){var e=u(o).val();if(r(n,e,s,!0)){var i=a(e);u(o).val(i.value)}else h(n,null)}),setTimeout(function(){r(n,s.value,s,!0)?u(o).val(s.value):h(n,null)},100),this}};return t.setup=function(){return{validJson:!0,validBlank:!1,minLength:-1,maxLength:-1,pattern:null,message:null}},t});