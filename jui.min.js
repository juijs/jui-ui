(function(c){var b=null,g={},f={};var h=function(o,k){var m=null,o=(k)?o.slice(0):o;function n(r,q){var p=o[r];o[r]=o[q];o[q]=p}function l(q,u,s){var t=u,p=o[q];n(q,s);for(var r=u;r<s;r++){if(m(o[r],p)||!m(p,o[r])&&r%2==1){n(r,t);t++}}n(s,t);return t}this.setCompare=function(p){m=p};this.run=function(r,q){var p=null;if(typeof r!=="number"){r=0}if(typeof q!=="number"){q=o.length-1}if(r<q){p=r+Math.ceil((q-r)*0.5);newPivot=l(p,r,q);this.run(r,newPivot-1);this.run(newPivot+1,q)}return o}};var e=function(){this.isIndexDepth=function(k){if(typeof(k)=="string"&&k.indexOf(".")!=-1){return true}return false};this.getIndexList=function(k){var o=[],m=""+k;if(m.length==1){o[0]=parseInt(k)}else{var n=m.split(".");for(var l=0;l<n.length;l++){o[l]=parseInt(n[l])}}return o};this.changeIndex=function(o,n,k){var m=this.getIndexList(k).length,l=this.getIndexList(o),q=this.getIndexList(n);for(var p=0;p<m;p++){l.shift()}return q.concat(l).join(".")};this.getNextIndex=function(l){var k=this.getIndexList(l),m=k.pop()+1;k.push(m);return k.join(".")};this.getParentIndex=function(k){if(!this.isIndexDepth(k)){return null}var l=this.getIndexList(k);if(l.length==2){return""+l[0]}else{if(l.length>2){l.pop();return l.join(".")}}}};var d={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(m){var k="";var t,r,p,s,q,o,n;var l=0;m=d._utf8_encode(m);while(l<m.length){t=m.charCodeAt(l++);r=m.charCodeAt(l++);p=m.charCodeAt(l++);s=t>>2;q=((t&3)<<4)|(r>>4);o=((r&15)<<2)|(p>>6);n=p&63;if(isNaN(r)){o=n=64}else{if(isNaN(p)){n=64}}k=k+d._keyStr.charAt(s)+d._keyStr.charAt(q)+d._keyStr.charAt(o)+d._keyStr.charAt(n)}return k},decode:function(m){var k="";var t,r,p;var s,q,o,n;var l=0;m=m.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(l<m.length){s=d._keyStr.indexOf(m.charAt(l++));q=d._keyStr.indexOf(m.charAt(l++));o=d._keyStr.indexOf(m.charAt(l++));n=d._keyStr.indexOf(m.charAt(l++));t=(s<<2)|(q>>4);r=((q&15)<<4)|(o>>2);p=((o&3)<<6)|n;k=k+String.fromCharCode(t);if(o!=64){k=k+String.fromCharCode(r)}if(n!=64){k=k+String.fromCharCode(p)}}k=d._utf8_decode(k);return k},_utf8_encode:function(l){l=l.replace(/\r\n/g,"\n");var k="";for(var o=0;o<l.length;o++){var m=l.charCodeAt(o);if(m<128){k+=String.fromCharCode(m)}else{if((m>127)&&(m<2048)){k+=String.fromCharCode((m>>6)|192);k+=String.fromCharCode((m&63)|128)}else{k+=String.fromCharCode((m>>12)|224);k+=String.fromCharCode(((m>>6)&63)|128);k+=String.fromCharCode((m&63)|128)}}}return k},_utf8_decode:function(k){var l="";var m=0;var n=c1=c2=0;while(m<k.length){n=k.charCodeAt(m);if(n<128){l+=String.fromCharCode(n);m++}else{if((n>191)&&(n<224)){c2=k.charCodeAt(m+1);l+=String.fromCharCode(((n&31)<<6)|(c2&63));m+=2}else{c2=k.charCodeAt(m+1);c3=k.charCodeAt(m+2);l+=String.fromCharCode(((n&15)<<12)|((c2&63)<<6)|(c3&63));m+=3}}}return l}};var j=function(z,q,l){var y={},m={};var u=Array.prototype,w=u.slice,t=u.forEach;var o={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var k in o){o[o[k]]=k}var s=/\\|'|\r|\n|\t|\u2028|\u2029/g,n=/\\(\\|'|r|n|t|u2028|u2029)/g,x=/.^/;var r=function(p){return p.replace(n,function(A,B){return o[B]})};var v=y.each=y.forEach=function(E,D,C){if(E==null){return}if(t&&E.forEach===t){E.forEach(D,C)}else{if(E.length===+E.length){for(var B=0,p=E.length;B<p;B++){if(B in E&&D.call(C,E[B],B,E)===m){return}}}else{for(var A in E){if(y.has(E,A)){if(D.call(C,E[A],A,E)===m){return}}}}}};y.has=function(A,p){return hasOwnProperty.call(A,p)};y.defaults=function(p){v(w.call(arguments,1),function(A){for(var B in A){if(p[B]==null){p[B]=A[B]}}});return p};y.templateSettings={evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g};y.template=function(E,D,B){B=y.defaults(B||{},y.templateSettings);var C="__p+='"+E.replace(s,function(F){return"\\"+o[F]}).replace(B.escape||x,function(F,G){return"'+\n_.escape("+r(G)+")+\n'"}).replace(B.interpolate||x,function(F,G){return"'+\n("+r(G)+")+\n'"}).replace(B.evaluate||x,function(F,G){return"';\n"+r(G)+"\n;__p+='"})+"';\n";if(!B.variable){C="with(obj||{}){\n"+C+"}\n"}C="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+C+"return __p;\n";var A=new Function(B.variable||"obj","_",C);if(D){return A(D,y)}var p=function(F){return A.call(this,F,y)};p.source="function("+(B.variable||"obj")+"){\n"+C+"}";return p};return y.template(z,q,l)};var i={browser:{webkit:(window.webkitURL)?true:false,mozilla:(window.mozInnerScreenX)?true:false,msie:(navigator.userAgent.indexOf("Trident")!=-1)?true:false},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),scrollSize:(window.webkitURL)?10:17,inherit:function(l,k){l.super_=k;l.prototype=new k;l.prototype.constructor=l},extend:function(k,n){if(!n||typeof n!=="object"){return k}var m=Object.keys(n);var l=m.length;while(l--){k[m[l]]=n[m[l]]}return k},pxToInt:function(k){if(typeof(k)=="string"&&k.indexOf("px")!=-1){return parseInt(k.split("px").join(""))}return k},clone:function(l){var m=($.isArray(l))?[]:{};for(var k in l){if(typeof(l[k])=="object"){m[k]=this.clone(l[k])}else{m[k]=l[k]}}return m},sort:function(k){return new h(k)},runtime:function(k,n){var l=new Date().getTime();n();var m=new Date().getTime();console.log(k+" : "+(m-l)+"ms")},template:function(k,l){if(!l){return j(k)}else{return j(k,l)}},resize:function(m,k){var l=(function(){var n=0;return function(){clearTimeout(n);n=setTimeout(m,k)}})();$(window).resize(function(){l()})},index:function(){return new e()},chunk:function(l,k){var p=[],m=0,o=l.length;while(m<o){p.push(l.slice(m,m+=k))}return p},typeCheck:function(n,l){function k(p,q){return{string:(typeof(q)=="string")?true:false,integer:(typeof(q)=="number"&&q%1==0)?true:false,"float":(typeof(q)=="number"&&q%1!=0)?true:false,number:(typeof(q)=="number")?true:false,object:(typeof(q)=="object")?true:false,"function":(typeof(q)=="function")?true:false,array:(q!=null&&typeof(q)=="object"&&typeof(q.length)=="number")?true:false,"boolean":(typeof(q)=="boolean")?true:false,"undefined":(typeof(q)=="undefined")?true:false,"null":(q===null)?true:false}[p]}if(typeof(n)=="object"&&n.length){var o=n;for(var m=0;m<o.length;m++){if(k(o[m],l)){return true}}return false}else{return k(n,l)}},typeCheckObj:function(n,o){if(typeof(n)!="object"){return}var k=this;for(var l in n){var m=n[l];if(typeof(m)=="function"){(function(q,p){n[q]=function(){var r=arguments,t=o[q];for(var s=0;s<r.length;s++){if(!k.typeCheck(t[s],r[s])){throw new Error("JUI_CRITICAL_ERR: the "+s+"th parameter is not a "+t[s]+" ("+name+")")}}return p.apply(this,r)}})(l,m)}}},dataToCsv:function(r,q,m){var l="",k=(!m)?q.length:m;for(var p=-1;p<k;p++){var n=[];for(var o=0;o<r.length;o++){if(r[o]){if(p==-1){n.push(r[o])}else{n.push(q[p][r[o]])}}}l+=n.join(",")+"\n"}return l},dataToCsv2:function(n){var k="";var p=$.extend({fields:null,rows:null,names:null,count:(this.typeCheck("integer",n.count))?n.count:n.rows.length},n);for(var o=-1;o<p.count;o++){var l=[];for(var m=0;m<p.fields.length;m++){if(p.fields[m]){if(o==-1){if(p.names&&p.names[m]){l.push(p.names[m])}else{l.push(p.fields[m])}}else{l.push(p.rows[o][p.fields[m]])}}}k+=l.join(",")+"\n"}return k},fileToCsv:function(l,m){var k=new FileReader();k.onload=function(n){if(typeof(m)=="function"){m(n.target.result)}};k.readAsText(l)},csvToBase64:function(k){return"data:application/octet-stream;base64,"+d.encode(k)},csvToData:function(q,k){var p=[],n=k.split("\n");for(var o=1;o<n.length;o++){if(n[o]!=""){var l=n[o].split(","),r={};for(var m=0;m<q.length;m++){r[q[m]]=l[m]}p.push(r)}}return p},getCsvFields:function(l,k){var n=(k)?k:l;for(var m=0;m<n.length;m++){if(!isNaN(n[m])){n[m]=l[n[m]]}}return n},dateFormat:function(L,E,k){var A=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"];var A=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"];var A=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"];var n=["\x01","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var l=["\x02","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var p=["\x03","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function w(t,m){var y=t+"";m=m||2;while(y.length<m){y="0"+y}return y}var u=k?L.getUTCFullYear():L.getFullYear();E=E.replace(/(^|[^\\])yyyy+/g,"$1"+u);E=E.replace(/(^|[^\\])yy/g,"$1"+u.toString().substr(2,2));E=E.replace(/(^|[^\\])y/g,"$1"+u);var q=(k?L.getUTCMonth():L.getMonth())+1;E=E.replace(/(^|[^\\])MMMM+/g,"$1"+A[0]);E=E.replace(/(^|[^\\])MMM/g,"$1"+n[0]);E=E.replace(/(^|[^\\])MM/g,"$1"+w(q));E=E.replace(/(^|[^\\])M/g,"$1"+q);var I=k?L.getUTCDate():L.getDate();E=E.replace(/(^|[^\\])dddd+/g,"$1"+l[0]);E=E.replace(/(^|[^\\])ddd/g,"$1"+p[0]);E=E.replace(/(^|[^\\])dd/g,"$1"+w(I));E=E.replace(/(^|[^\\])d/g,"$1"+I);var v=k?L.getUTCHours():L.getHours();E=E.replace(/(^|[^\\])HH+/g,"$1"+w(v));E=E.replace(/(^|[^\\])H/g,"$1"+v);var F=v>12?v-12:v==0?12:v;E=E.replace(/(^|[^\\])hh+/g,"$1"+w(F));E=E.replace(/(^|[^\\])h/g,"$1"+F);var B=k?L.getUTCMinutes():L.getMinutes();E=E.replace(/(^|[^\\])mm+/g,"$1"+w(B));E=E.replace(/(^|[^\\])m/g,"$1"+B);var z=k?L.getUTCSeconds():L.getSeconds();E=E.replace(/(^|[^\\])ss+/g,"$1"+w(z));E=E.replace(/(^|[^\\])s/g,"$1"+z);var G=k?L.getUTCMilliseconds():L.getMilliseconds();E=E.replace(/(^|[^\\])fff+/g,"$1"+w(G,3));G=Math.round(G/10);E=E.replace(/(^|[^\\])ff/g,"$1"+w(G));G=Math.round(G/10);E=E.replace(/(^|[^\\])f/g,"$1"+G);var o=v<12?"AM":"PM";E=E.replace(/(^|[^\\])TT+/g,"$1"+o);E=E.replace(/(^|[^\\])T/g,"$1"+o.charAt(0));var x=o.toLowerCase();E=E.replace(/(^|[^\\])tt+/g,"$1"+x);E=E.replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var J=-L.getTimezoneOffset();var r=k||!J?"Z":J>0?"+":"-";if(!k){J=Math.abs(J);var N=Math.floor(J/60);var C=J%60;r+=w(N)+":"+w(C)}E=E.replace(/(^|[^\\])K/g,"$1"+r);var D=(k?L.getUTCDay():L.getDay())+1;E=E.replace(new RegExp(l[0],"g"),l[D]);E=E.replace(new RegExp(p[0],"g"),p[D]);E=E.replace(new RegExp(A[0],"g"),A[q]);E=E.replace(new RegExp(n[0],"g"),n[q]);E=E.replace(/\\(.)/g,"$1");return E},btoa:d.encode,atob:d.decode};var a=function(o,p){var l=[];for(var m=0;m<o.length;m++){if(p>0&&o[m]=="util"){l[m]=i}if(p>1&&o[m]=="ui"){l[m]=g}if(p>1&&o[m].indexOf("ui.")!=-1){var k=o[m].replace("ui.",""),n=g[k];if(!n){throw new Error("JUI_CRITICAL_ERR: UI("+o[m]+") is not loaded")}l[m]=n}if(p>2&&o[m]=="uix"){l[m]=f}if(p>2&&o[m].indexOf("uix.")!=-1){var k=o[m].replace("uix.",""),n=f[k];if(!n){throw new Error("JUI_CRITICAL_ERR: UIX("+o[m]+") is not loaded")}l[m]=n}}return l};c.jui={ready:function(){var k=[],m=(arguments.length==2)?arguments[1]:arguments[0],l=(arguments.length==2)?arguments[0]:null;$(function(){if(l){k=a(l,3)}else{k=[g,f,i]}m.apply(null,k)})},define:function(){var n=[],o=[];var l=arguments[0],q=(arguments.length==3)?arguments[2]:arguments[1],p=(arguments.length==3)?arguments[1]:null;if(l=="core"){b=q(i)}if(l.indexOf("ui.")!=-1){var k=[],m=l.replace("ui.","");if(p){k=a(p,1)}else{k=[i]}g[m]=b.init({type:m,func:q.apply(null,k)})}if(l.indexOf("uix.")!=-1){var k=[],m=l.replace("uix.","");if(p){k=a(p,2)}else{k=[i,g]}f[m]=b.init({type:m,func:q.apply(null,k)})}},log:function(){var k=window.open(this.logUrl,"JUIM","width=800, height=600, toolbar=no, menubar=no, resizable=yes");jui.debugAll(function(l,m){k.log(l,m)});return k},logUrl:"jui.mng.html"}})(window);jui.define("core",function(c){var b=new function(){var f=[],e=[];this.add=function(g){f.push(g)};this.get=function(j){var g=[];if(!isNaN(j)){return f[j]}else{if(typeof(j)=="string"){for(var h=0;h<f.length;h++){if(j==f[h].type){g.push(f[h])}}}}return g};this.getAll=function(){return f};this.size=function(){return f.length};this.debug=function(n,l,h,o){if(!n.__proto__){return}var g=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var k in n){var m=n[k];if(typeof(m)=="function"&&$.inArray(k,g)==-1){(function(j,i,p,q){n.__proto__[j]=function(){var s=Date.now();var r=i.apply(this,arguments);var t=Date.now();if(typeof(o)=="function"){o({type:jui.get(l).type,name:j,c_index:p,u_index:q,time:t-s},arguments)}else{if(!isNaN(p)&&!isNaN(q)){console.log("TYPE("+jui.get(l).type+"), NAME("+j+"), INDEX("+p+":"+q+"), TIME("+(t-s)+"ms), ARGUMENTS...")}else{console.log("NAME("+j+"), TIME("+(t-s)+"ms), ARGUMENTS...")}console.log(arguments);console.log("")}return r}})(k,m,l,h)}}};this.debugAll=function(l){for(var k=0;k<f.length;k++){var g=f[k].list;for(var h=0;h<g.length;h++){this.debug(g[h],k,h,l)}}};this.addClass=function(g){e.push(g)};this.getClass=function(h){if(!isNaN(h)){return e[h]}else{if(typeof(h)=="string"){for(var g=0;g<e.length;g++){if(h==e[g].type){return e[g]}}}}return null};this.getClassAll=function(){return e};this.create=function(i,g,h){var j=b.getClass(i)["class"];return j(g,h)}};var d=function(i){var g=[];function e(l){var m=["webkit","moz","MS","o",""];for(var k=0;k<m.length;k++){var j=l.type;if(!m[k]){j=j.toLowerCase()}$(l.target).on(m[k]+j,l.callback)}g.push(l)}function f(j){if(j.callback&&!j.children){$(j.target).on(j.type,j.callback)}else{$(j.target).on(j.type,j.children,j.callback)}g.push(j)}function h(j){var k={click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"};if(j.callback&&!j.children){$(j.target).on(k[j.type],j.callback)}else{$(j.target).on(k[j.type],j.children,j.callback)}g.push(j)}this.add=function(j){var k={target:j[0],type:j[1]};if(typeof(j[2])=="function"){k=$.extend(k,{callback:j[2]})}else{if(typeof(j[2])=="string"){k=$.extend(k,{children:j[2],callback:j[3]})}}if(k.type.toLowerCase().indexOf("animation")!=-1){e(k)}else{if(k.target!="body"){$(k.target).unbind(k.type)}if(c.isTouch){h(k)}else{f(k)}}};this.get=function(j){return g[j]};this.getAll=function(){return g};this.size=function(){return g.length}};var a=function(){this.base=function(){var e=null;this.emit=function(j,g){for(var h=0;h<this.event.length;h++){var f=this.event[h];if(f.type==j.toLowerCase()){if(typeof(g)=="object"&&g.length!=undefined){f.callback.apply(this,g)}else{f.callback.call(this,g)}}}};this.on=function(f,g){if(typeof(f)!="string"&&typeof(g)!="object"){return}this.event.push({type:f.toLowerCase(),callback:g})};this.addEvent=function(){this.listen.add(arguments)};this.addValid=function(f,h){if(!this.__proto__){return}var g=this.__proto__[f];this.__proto__[f]=function(){var j=arguments;for(var k=0;k<j.length;k++){if(!c.typeCheck(h[k],j[k])){throw new Error("JUI_CRITICAL_ERR: the "+k+"th parameter is not a "+h[k]+" ("+f+")")}}return g.apply(this,j)}};this.callBefore=function(f,h){if(!this.__proto__){return}var g=this.__proto__[f];this.__proto__[f]=function(){var i=arguments;if(typeof(h)=="function"){if(h.apply(this,i)!==false){return g.apply(this,i)}}else{return g.apply(this,i)}}};this.callAfter=function(f,h){if(!this.__proto__){return}var g=this.__proto__[f];this.__proto__[f]=function(){var i=arguments,j=g.apply(this,i);if(typeof(h)=="function"&&j!==false){h.apply(this,i)}return j}};this.callDelay=function(h,j){if(!this.__proto__){return}var i=this.__proto__[h],g=(!isNaN(j.delay))?j.delay:0;this.__proto__[h]=function(){var k=this,l=arguments;if(typeof(j.before)=="function"){j.before.apply(k,l)}if(g>0){setTimeout(function(){f(k,l)},g)}else{f(k,l)}};function f(k,l){var m=i.apply(k,l);if(typeof(j.after)=="function"&&m!==false){j.after.apply(k,l)}}};this.setTpl=function(f,g){this.tpl[f]=c.template(g)};this.setVo=function(){if(!this.options.vo){return}if(e!=null){e.reload()}e=$(this.selector).jbinder();this.bind=e};this.setOption=function(g,h){if(typeof(g)=="object"){for(var f in g){this.options[f]=g[f]}}else{this.options[g]=h}}};this.build=function(f){c.inherit(f.func,this.base);function e(o,n){var h=["event","tpl","vo"],m=[],g=[];for(var l in o){m.push(l)}for(var l in n){g.push(l)}for(var k=0;k<g.length;k++){var j=g[k];if($.inArray(j,m)==-1&&$.inArray(j,h)==-1){throw new Error("JUI_CRITICAL_ERR: '"+j+"' is not an option")}}}return function(g,h){var i=[],j=$(g);j.each(function(o){var n=new f.func(),u=n.setting();var t=(typeof(u.options)=="object")?u.options:{};e(t,h);var k=$.extend(t,h);k.tpl=(k.tpl)?k.tpl:{};n.init.prototype=n;n.init.prototype.selector=j.selector;n.init.prototype.root=this;n.init.prototype.options=k;n.init.prototype.tpl={};n.init.prototype.event=new Array();n.init.prototype.listen=new d();n.init.prototype.timestamp=Date.now();n.init.prototype.index=(j.size()==0)?null:o;$("script").each(function(v){if(g==$(this).data("jui")||g==$(this).data("vo")){var w=$(this).data("tpl");if(w==""){throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required")}k.tpl[w]=$(this).html()}});if(k.tpl){for(var l in k.tpl){var q=k.tpl[l];if(typeof(q)=="string"&&q!=""){n.init.prototype.tpl[l]=c.template(q)}}}var s=new n.init();var m=(typeof(u.valid)=="object")?u.valid:{},p=(typeof(u.animate)=="object")?u.animate:{};if(typeof(s.options.event)=="object"){for(var r in s.options.event){s.on(r,s.options.event[r])}}for(var r in m){s.addValid(r,m[r])}if(k.animate){for(var r in p){if(typeof(p[r])=="object"){s.callDelay(r,p[r])}}}i[o]=s});b.add({type:f.type,list:i,selector:g,options:h,index:b.size()});return(i.length==1)?i[0]:i}}};a.init=function(g){var f=null;if(typeof(g)==="object"){var e=new a();f=e.build(g);b.addClass({type:g.type,"class":f})}return f};window.jui=(typeof(jui)=="object")?$.extend(jui,b):b;return a});jui.define("ui.button",[],function(){var b=function(f,e,d){this.data={index:0,value:"",elem:null};this.ui=f;this.element=e;this.options=$.extend({index:0,value:""},d);this._setting=function(m,j,h){var o=this,l="active",i=this.options.index,n=this.options.value;$(o.element).find(".btn").each(function(p){if(m=="event"){if(j.currentTarget==this){k(p,this)}else{g(this)}}else{if(m=="init"){if(h=="value"){if(n==$(this).attr("value")){k(p,this)}else{g(this)}}else{if(i==p){k(p,this)}else{g(this)}}}}});function k(p,q){o.data={index:p,value:$(q).attr("value"),element:q};$(q).addClass(l)}function g(p){$(p).removeClass(l)}};this.init=function(){var g=this;this.ui.addEvent(g.element,"click",".btn",function(h){g._setting("event",h);g.ui.emit("change",[g.data,h])});if(this.options.value!=""){this._setting("init",this.options.value,"value")}else{this._setting("init",this.options.index,"index")}}};var a=function(){this.data=[];this.options=$.extend({index:[],value:[]},this.options);this._setting=function(k,h,f){var m=this,j="active",g=this.options.index,l=this.options.value;$(m.element).find(".btn").each(function(e){if(k=="init"){if(f=="value"){if(n(l,$(this).attr("value"))){i(e,this)}else{d(e,this)}}else{if(n(g,e)){i(e,this)}else{d(e,this)}}}else{if(h.currentTarget==this){if(!$(this).hasClass("active")){i(e,this)}else{d(e,this)}}}});function i(e,o){m.data[e]={index:e,value:$(o).attr("value"),element:o};$(o).addClass(j)}function d(e,o){m.data[e]=null;$(o).removeClass(j)}function n(e,p){for(var o=0;o<e.length;o++){if(e[o]==p){return true}}return false}}};var c=function(){var d={};this.setting=function(){return{options:{type:"radio",index:0,value:""},valid:{setIndex:[["integer","array"]],setValue:[["integer","string","array","boolean"]]}}};this.init=function(){var e=this,f=this.options;if(f.type=="radio"){d[f.type]=new b(e,this.root,e.options);d[f.type].init()}else{if(f.type=="check"){a.prototype=new b(e,this.root,e.options);d[f.type]=new a();d[f.type].init()}}return this};this.setIndex=function(e){d[this.options.type].options.index=e;d[this.options.type]._setting("init",null,"index")};this.setValue=function(e){d[this.options.type].options.value=e;d[this.options.type]._setting("init",null,"value")};this.getData=function(){return d[this.options.type].data};this.getValue=function(){return d[this.options.type].data.value};this.reload=function(){d[this.options.type]._setting("init")}};return c});jui.define("ui.combo",[],function(){var a=function(){var d=jui.get("combo");for(var f=0;f<d.length;f++){var c=d[f].list;for(var e=0;e<c.length;e++){if(c[e].type=="open"){c[e].fold()}}}};$(function(){$("body").bind("click",function(c){a()})});var b=function(){var d=null,c=null;function f(i,j){var k=d.root,h=d.text,l=d.drop,g=l.children("li");g.each(function(m){var n=e(this),o=$(n).attr("value"),p=$(n).html();if(!o){o=p;$(n).attr("value",o)}if((i=="index"&&j==m)||(i=="value"&&j==o)){c={value:o,text:p,element:n};k.attr("value",o);h.html(p)}});if(g.size()==0){c=null}}function e(g){return($(g).children("a").size()>0)?$(g).children("a")[0]:g}this.setting=function(){return{options:{index:0,value:"",width:0,height:100,scroll:true,position:"bottom"},valid:{setIndex:["integer"],setValue:[["integer","string","boolean"]]}}};this.init=function(){var h=this,k=this.options;var l=$(this.root),j=l.children(".btn").not(".btn-toggle"),i=l.children(".btn-toggle"),g=l.children(".btn"),m=l.children("ul");m.insertAfter(j);if(k.width>0){j.outerWidth(k.width-i.outerWidth()+1);j.css({overflow:"hidden","white-space":"nowrap"})}if(k.scroll!==false){m.css({maxHeight:k.height,overflow:"auto"})}this.addEvent(g,"click",function(n){if(h.type=="open"){return}a();h.open(n);return false});this.addEvent(m,"click","li",function(p){a();var n=e(p.target),o=$(n).attr("value"),q=$(n).html();c={value:o,text:q,element:n};j.html(q);l.attr("value",o);h.emit("change",[c,p]);p.preventDefault()});d={root:l,text:j,drop:m,toggle:i};this.type="fold";this.reload();return this};this.setIndex=function(g){f("index",g)};this.setValue=function(g){f("value",g)};this.getData=function(){return c};this.getValue=function(){return(c!=null)?c.value:null};this.getText=function(){return(c!=null)?c.text:null};this.open=function(i){d.toggle.addClass("active");d.drop.outerWidth(d.root.outerWidth()-1);if(this.options.position=="top"){var g=d.drop.outerHeight();d.drop.animate({top:"-"+g,height:"toggle"},100)}else{d.drop.slideDown(100)}this.emit("open",i);this.type="open"};this.fold=function(){d.drop.hide();d.toggle.removeClass("active");if(this.options.position=="top"){d.drop.css("top",0)}this.emit("fold");this.type="fold"};this.reload=function(){if(this.options.value!=""){f("value",this.options.value)}else{f("index",this.options.index)}this.emit("reload",c)}};return b});jui.define("ui.datepicker",["util"],function(a){var b=function(){var n=null,k=null,d=null,i=null,m={};var l=null,g=null;function h(r){r.addEvent(l.children(".prev"),"click",function(s){r.prev(s)});r.addEvent(l.children(".next"),"click",function(s){r.next(s)})}function e(s,v){var t=s.options;if(t.type=="daily"){var r=(k<10)?"0"+k:k,u=(v<10)?"0"+v:v;i=new Date(n+"-"+r+"-"+u)}else{if(t.type=="monthly"){var r=(k<10)?"0"+k:k;i=new Date(n+"-"+r+"-01")}else{if(t.type=="yearly"){i=new Date(v+"-01-01")}}}}function p(t){var u=t.options,s=null;if(u.type=="daily"){var r=(k<10)?"0"+k:k;s=new Date(n+"-"+r+"-01")}else{if(u.type=="monthly"){s=new Date(n+"-01-01")}else{if(u.type=="yearly"){s=new Date()}}}return s}function c(s,y){var v=s.options;var r="",x=[];m={};for(var u=0;u<y.objs.length;u++){x.push(y.nums[u]);if(w(u)){r+=s.tpl.dates({dates:x});x=[]}}var t=$(r);t.find("td").each(function(z){$(this).addClass(y.objs[z].type);s.addEvent(this,"click",function(A){if(y.objs[z].type=="none"){return}g.find("td").removeClass("active");$(this).addClass("active");e(s,y.objs[z].no);s.emit("select",[s.getFormat(),A])});if(y.objs[z].type=="now"){e(s,y.objs[z].no)}if(y.objs[z].type!="none"){m[y.objs[z].no]=this}});function w(z){return(v.type=="daily")?((z+1)%7==0):((z+1)%3==0)}return t}function j(s,t){if(t==2){if(s%100!=0&&(s%4==0||s%400==0)){return 29}else{return 28}}else{var r=[31,0,31,30,31,30,31,31,30,31,30,31];return r[t-1]}}function o(A,s){var v=[],B=[],D=1;var z=new Date(),r=new Date(A+"-"+((s<10)?"0"+s:s)).getDay(),C=j(A,s);var w=(s==1)?A-1:A,t=(s==1)?12:s-1,x=j(w,t);for(var u=0;u<r;u++){B[u]=(x-r)+(u+1);v[u]={type:"none",no:B[u]}}for(var u=r;u<42;u++){if(D<=C){B[u]=D;v[u]={type:(z.getMonth()+1==s&&z.getDate()==D)?"now":"",no:B[u]};D++}else{B[u]=D-C;v[u]={type:"none",no:B[u]};D++}}return{objs:v,nums:B}}function q(v){var u=[],s=[];var t=new Date();for(var r=1;r<=12;r++){s.push(r);u.push({type:(t.getFullYear()==n&&t.getMonth()+1==r)?"now":"",no:r})}return{objs:u,nums:s}}function f(w){var v=[],t=[],r=w-4;var u=new Date();for(var s=r;s<r+12;s++){t.push(s);v.push({type:(u.getFullYear()==s)?"now":"",no:s})}return{objs:v,nums:t}}this.setting=function(){return{options:{type:"daily",titleFormat:"yyyy.MM",format:"yyyy-MM-dd",animate:false},valid:{page:["integer","integer"],select:["integer","integer","integer"],getFormat:["string"]},animate:{page:{after:function(){var r=this;g.find("tr").each(function(t){var s=(t+1)*200;$(this).addClass("fadeIn").css({"animation-duration":s+"ms"});(function(u){r.addEvent(this,"AnimationEnd",function(){$(u).removeClass("fadeIn")})})(this)})}}}}};this.init=function(){var r=this,s=this.options;var t=new Date();n=t.getFullYear();k=t.getMonth()+1;d=t.getDate();l=$(this.root).children(".head");g=$(this.root).children(".body");h(this);this.page(n,k);return this};this.page=function(t,r){if(arguments.length==0){return}var s=this.options;if(s.type=="daily"){n=t;k=r;g.find("tr:not(:first-child)").remove();g.append(c(this,o(n,k)))}else{if(s.type=="monthly"){n=t;g.find("tr").remove();g.append(c(this,q(n)))}else{if(s.type=="yearly"){n=t;g.find("tr").remove();g.append(c(this,f(n)))}}}l.children(".title").html(a.dateFormat(p(this),s.titleFormat))};this.prev=function(t){var s=this.options;if(s.type=="daily"){var u=(k==1)?n-1:n,r=(k==1)?12:k-1;this.page(u,r)}else{if(s.type=="monthly"){this.page(n-1)}else{if(s.type=="yearly"){this.page(n-12)}}}this.emit("prev",[t])};this.next=function(t){var s=this.options;if(s.type=="daily"){var u=(k==12)?n+1:n,r=(k==12)?1:k+1;this.page(u,r)}else{if(s.type=="monthly"){this.page(n+1)}else{if(s.type=="yearly"){this.page(n+12)}}}this.emit("next",[t])};this.select=function(u,r,t){var s=this.options;if(arguments.length==0){u=n;r=k;t=d}if(s.type=="daily"){this.page(u,r);$(m[t]).trigger("click")}else{if(s.type=="monthly"){this.page(u);$(m[r]).trigger("click")}else{if(s.type=="yearly"){this.page(u);$(m[u]).trigger("click")}}}};this.getDate=function(){return i};this.getTime=function(){return i.getTime()};this.getFormat=function(r){return a.dateFormat(i,(typeof(r)=="string")?r:this.options.format)}};return b});jui.define("ui.dropdown",[],function(){var a=function(){var d=jui.get("dropdown");for(var f=0;f<d.length;f++){var c=d[f].list;for(var e=0;e<c.length;e++){if(c[e].type=="show"){c[e].hide()}}}};$(function(){$("body").bind("click",function(d){var c=d.target.tagName;if(c!="LI"&&c!="INPUT"&&c!="A"&&c!="BUTTON"&&c!="I"){a()}})});var b=function(){var c=null,d=-1;function f(g){var h=$(c.menu).find("li");h.unbind("click").unbind("hover");g.addEvent(h,"click",function(j){var i=j.currentTarget;g.emit("change",[{text:$(i).html(),element:i,value:$(i).val()},j]);if(g.options.close){a()}});g.addEvent(h,"hover",function(i){h.removeClass("hover")})}function e(g){if(!g.options.keydown){return}g.addEvent(window,"keydown",function(i){if(g.type=="hide"){return}var h=c.menu.find("li");if(i.which==38){if(d<0){d=h.size()-1}else{d--}g.hover(d);return false}if(i.which==40){if(d<h.size()-1){d++}else{d=0}g.hover(d);return false}if(i.which==13){h.eq(d).trigger("click");d=-1}})}this.setting=function(){return{options:{close:true,keydown:false,list:[],left:0,top:0},valid:{update:["array"],show:["number","number"],move:["number","number"],hover:["integer"]}}};this.init=function(){var h=this,j=this.options;var i=$(this.root),g=i.children("ul"),k=i.children(".anchor");c={root:i,menu:g,anchor:k};c.root.outerWidth(c.menu.outerWidth());this.update(j.list);this.move(j.left,j.top);this.type="hide";return this};this.update=function(h){if(typeof(h)=="object"&&this.tpl.li){$(c.menu).empty();for(var g=0;g<h.length;g++){$(c.menu).append(this.tpl.li(h[g]))}}f(this);e(this)};this.hide=function(){c.root.hide();this.emit("hide");this.type="hide"};this.show=function(g,h){a();c.root.show();if(c.anchor.size()>0){c.root.css("margin-top","10px")}if(g||h){this.move(g,h)}this.emit("show");this.type="show"};this.move=function(g,h){if(g){c.root.css("left",g)}if(h){c.root.css("top",h)}};this.hover=function(h){var g=c.menu.find("li");g.removeClass("hover");g.eq(h).addClass("hover")}};return b});jui.define("ui.modal",["util"],function(b){var a=0;b.resize(function(){if(a==$(window).width()){return}var e=jui.get("modal");for(var g=0;g<e.length;g++){var d=e[g].list;for(var f=0;f<d.length;f++){if(d[f].type=="show"){d[f].hide();d[f].show()}}}a=$(window).width()},300);var c=function(){var l=null,g=null;var f=null,n=null,j=null;var k=0,i=0,m=5000;function e(o){n={position:$(o.root).css("position"),left:$(o.root).css("left"),top:$(o.root).css("top"),"z-index":$(o.root).css("z-index"),display:$(o.root).css("display")};j={position:$(o.options.target).css("position")}}function d(p){var o="auto",u="auto";var r=p.options.target,q=(r=="body")?window:r,t=(r=="body")?"fixed":"absolute",s=(r=="body")?null:"relative";o=($(q).width()/2)-($(p.root).width()/2);u=($(q).height()/2)-($(p.root).height()/2);return{x:o,y:u,pos:t,tPos:s,h:$(r).outerHeight()}}function h(o,p){if(l!=null){return}l=$("<div id='MODAL_"+o.timestamp+"'></div>").css({position:"absolute",width:"100%",height:p,left:0,top:0,opacity:o.options.opacity,"background-color":o.options.color,"z-index":(m+o.options.index)-1});$(o.options.target).append(l);if(o.options.target!="body"){$(o.root).insertAfter(l)}o.addEvent(l,"click",function(q){if(o.options.autoHide){o.hide()}return false})}this.setting=function(){return{options:{color:"black",opacity:0.4,target:"body",index:0,autoHide:true}}};this.init=function(){e(this);this.type="hide";return this};this.hide=function(){if(n.display!="none"){g.remove();g=null}$(this.options.target).css("position",j.position);$(this.root).css(n);if(l){l.remove();l=null}this.type="hide"};this.show=function(){var o=d(this);if(n.display!="none"){g=$(this.root).clone();g.insertAfter($(this.root))}$(this.options.target).css("position",o.tPos);$(this.root).css({position:o.pos,left:o.x,top:o.y,"z-index":(m+this.options.index)}).show();h(this,o.h);this.type="show"}};return c});jui.define("ui.notify",[],function(){var a=function(){var c=null,b=12;this.setting=function(){return{options:{position:"top-right",padding:b,distance:5,timeout:3000,showDuration:500,hideDuration:500,showEasing:"swing",hideEasing:"linear"},valid:{add:["object","integer"]}}};this.init=function(){var d=this,f=this.options;var h=(typeof(f.padding)=="object")?b:f.padding,e={top:{top:h,bottom:null,left:h,right:h},"top-right":{top:h,bottom:null,left:null,right:h},"top-left":{top:h,bottom:null,left:h,right:null},bottom:{top:null,bottom:h,left:h,right:h},"bottom-right":{top:null,bottom:h,left:null,right:h},"bottom-left":{top:null,bottom:h,left:h,right:h}},g=e[f.position];if(typeof(f.padding)=="object"){g=$.extend(g,f.padding)}if(this.selector!="body"){$(this.selector).css("position","relative")}c=$("<div></div>").css($.extend({position:"absolute","z-index":3000},g));$(this.root).append(c);return this};this.add=function(g,k){var l=this,e=this.options,h=(!isNaN(k))?k:e.timeout;var d=$(this.tpl.alarm(g)).css({"margin-bottom":e.distance});if(e.position=="top"||e.position=="bottom"){d.outerWidth(c.width()-((typeof(e.padding)=="object"&&e.padding.right)?e.padding.right:b)*3)}if(j()){c.prepend(d)}else{c.append(d)}var f=d.css("opacity");d.css({opacity:0}).animate({opacity:f},e.showDuration,e.showEasing,function(){l.emit("show",[g])});this.addEvent(d,"click",function(m){l.emit("select",[g,m]);i();return false});if(h>0){setTimeout(i,h)}function i(){if(d==null){return}d.animate({opacity:0},e.hideDuration,e.hideEasing);d.slideUp(e.hideEasing,function(){l.emit("hide",[g]);d.remove();d=null})}function j(){return(e.position.indexOf("top-")!=-1)?true:false}};this.reset=function(){c.empty()}};return a});jui.define("ui.paging",[],function(){var a=function(){var g=1,e=1;var f={prev:null,list:null,next:null};function b(h){h.addEvent(f.prev,"click",function(i){h.prev();return false});h.addEvent(f.next,"click",function(i){h.next();return false})}function d(h){var i=f.list.children(".page");h.addEvent(i,"click",function(k){var j=parseInt($(k.currentTarget).text());h.page(j);return false})}function c(h,j){var i=f.list.children(".page");i.each(function(k){if($(this).text()==j){$(this).addClass("active")}else{$(this).removeClass("active")}})}this.setting=function(){return{options:{count:0,pageCount:10,screenCount:5},valid:{reload:["integer"],page:["integer"]}}};this.init=function(){var h=this,i=this.options;f.prev=$(h.root).children(".prev");f.list=$(h.root).children(".list");f.next=$(h.root).children(".next");b(this);this.reload();return this};this.reload=function(h){var h=(!h)?this.options.count:h;g=1;e=Math.ceil(h/this.options.pageCount);this.page(g)};this.page=function(k){if(!k){return g}var h=[],j=(e<this.options.screenCount)?e:this.options.screenCount,m=k-Math.ceil(j/2)+1,m=(m<1)?1:m;g=(k>e)?e:k;g=(k<1)?1:k;if(e<m+j+1){for(var l=e-j+1;l<e+1;l++){h.push(l)}if(g>e){g=e}}else{for(var l=m;l<m+j;l++){h.push(l)}}f.list.html(this.tpl.pages({pages:h,lastPage:e}));d(this);c(this,g);this.emit("page",[g])};this.next=function(){this.page(g+1)};this.prev=function(){this.page(g-1)};this.first=function(){this.page(1)};this.last=function(){this.page(e)}};return a});jui.define("ui.tooltip",[],function(){var a=function(){var d=null;var g={},f="",c=null;function e(h){d=$("<div id='TOOLTIP_"+h.timestamp+"' class='tooltip tooltip-"+h.options.position+" tooltip-"+h.options.color+"'><div class='anchor'></div><div class='title'>"+((h.options.title)?h.options.title:f)+"</div></div>");if(h.options.width){d.css("max-width",h.options.width)}if(h.options.align){d.css("text-align",h.options.align)}$("body").append(d);b(h)}function b(q){var k=$(q.root).offset(),p=$(q.root).outerWidth(),l=$(q.root).outerHeight();var m=d.outerWidth(),i=d.outerHeight();var o=0,n=0,j=q.options.position;if(j=="left"){o=k.left-m;n=k.top-((i-l)/2)}else{if(j=="right"){o=k.left+p;n=k.top-((i-l)/2)}else{if(j=="bottom"){o=k.left-(m/2)+(p/2);n=k.top+l}else{o=k.left-(m/2)+(p/2);n=k.top-i}}}g={x:(o<1)?1:o,y:(n<1)?1:n}}this.setting=function(){return{options:{color:"black",position:"top",width:150,align:"left",delay:0,type:"mouseover",title:""}}};this.init=function(){var h=this,i=this.options;f=$(this.root).attr("title");$(this.root).removeAttr("title");$(this.root).unbind(i.type).unbind("mouseout");this.addEvent(this.root,i.type,function(j){c=setTimeout(function(){h.show()},i.delay);return false});this.addEvent(this.root,"mouseout",function(j){clearTimeout(c);h.hide();return false});return this};this.hide=function(){if(d!=null){d.remove();d=null;g={}}};this.show=function(){if(d){this.hide()}e(this);d.css({left:g.x,top:g.y})}};return a});jui.define("uix.autocomplete",["util","ui.dropdown"],function(a,c){var b=function(){var e=null,f=null;function d(i){var j=$(i.tpl.words());$("body").append(j);e=c(j,{keydown:true,tpl:{li:"<li><!= word !></li>"},event:{change:function(k,l){$(f).val(k.text);i.emit("change",[k.text]);return false}}})}function h(n,p){var q=n.options.words,k=[];for(var o=0;o<q.length;o++){var m=q[o],l=q[o].toLowerCase(),j=p.toLowerCase();if(l.indexOf(j)!=-1){k.push({word:m})}}return k}function g(i){$(f).unbind("keyup");i.addEvent(f,"keyup",function(j){if(j.which==38||j.which==40||j.which==13){return}if($(this).val()==""){e.hide();return}var k=h(i,$(this).val());e.update(k);if(k.length>0){var l=$(i.root).offset();e.move(l.left,l.top+$(i.root).outerHeight());e.show()}else{e.hide()}return false})}this.setting=function(){return{options:{target:null,words:[]},valid:{update:["array"]}}};this.init=function(){var i=this,j=this.options;f=(j.target==null)?this.root:$(this.root).find(j.target);d(this);g(this);return this};this.update=function(i){this.options.words=i}};return b});jui.define("uix.tab",["util","ui.dropdown"],function(a,c){var b=function(){var g=null,f=-1,j={$root:null,$list:null,$anchor:null,activeIndex:0};function i(l,k,m){$(l).children("*").each(function(o){var n=this;if(("#"+n.id)==$(k).attr("href")){$(n).show()}else{$(n).hide()}})}function h(){j.$list.removeClass("active")}function e(k){var l=$(k).position();$(k).parent().addClass("menu-keep");g.show(l.left,l.top+j.$root.height())}function d(){var k=j.$list.eq(f);k.removeClass("menu-keep")}this.setting=function(){return{options:{target:"",index:0},valid:{show:["integer"]}}};this.init=function(){var k=this,m=this.options;j.$root=$(this.root);j.$list=$(this.root).children("li");j.$anchor=$("<div class='anchor'></div>");if(this.tpl.menu){var l=$(this.tpl.menu());l.insertAfter(k.root);g=c(l,{event:{change:function(n,o){d();k.emit("changeMenu",[n,o])},hide:function(){d()}}})}j.$list.each(function(n){if($(this).attr("class")=="active"||m.index==n){var o=this;setTimeout(function(){j.$anchor.appendTo($(o));j.activeIndex=n;k.show(n)},10)}if($(this).hasClass("menu")){f=n}k.addEvent($(this),"click","a",function(p){if(n!=f){if(m.target!=""){i(m.target,this)}k.emit("change",[{text:$(p.currentTarget).html(),index:n},p]);k.show(n);j.activeIndex=n}else{k.emit("menu",[{text:$(p.currentTarget).html()},p]);if(g.type!="show"){e(this)}}p.preventDefault()})});return this};this.show=function(k){h();var l=j.$list.eq(k);l.addClass("active");j.$anchor.appendTo(l);i(this.options.target,l.find("a").get(0))};this.activeIndex=function(){return j.activeIndex}};return b});jui.define("uix.table",["util","ui.dropdown"],function(b,f){b.resize(function(){var h=jui.get("table");for(var l=0;l<h.length;l++){var g=h[l].list;for(var k=0;k<g.length;k++){g[k].resize()}}},1000);var a=function(h){var g=this;this.element=null;this.list=[];this.order="asc";this.name=null;this.data=[];this.index=h;this.type="show";this.width=null;this.hide=function(){this.type="hide";$(this.element).hide()};this.show=function(){this.type="show";$(this.element).show()}};var e=function(j,m,p){var q=this,o={};this.data=j;this.rownum=null;this.index=null;this.element=null;this.list=[];this.parent=(p)?p:null;this.childrens=[];this.depth=0;this.type="fold";function g(r){q.rownum=(!isNaN(r))?r:q.rownum;if(!q.parent){q.index=""+q.rownum}else{q.index=q.parent.index+"."+q.rownum}if(q.parent&&typeof(q.index)=="string"){q.depth=q.index.split(".").length-1}if(!q.isLeaf()){i(q)}}function i(t){var s=t.childrens;for(var r=0;r<s.length;r++){s[r].reload(r);if(!s[r].isLeaf()){i(s[r])}}}function k(){q.list=[];$(q.element).find("td").each(function(r){q.list[r]=this;if(o[r]){this.style.display="none"}})}function h(){if(!m){return q.element}var r=$(m($.extend({row:{index:q.index,data:q.data,depth:q.depth}},q.data))).get(0);return r}function n(s){$(s.element).remove();for(var r=0;r<s.childrens.length;r++){var t=s.childrens[r];if(!t.isLeaf()){n(t)}else{$(t.element).remove()}}}function l(){for(var r=0;r<q.childrens.length;r++){q.childrens[r].reload(r)}}this.reload=function(r,u,t){if(!u){g(r)}if(this.element!=null){var s=h();$(s).insertAfter(this.element);$(this.element).remove();this.element=s}else{this.element=h()}if(t!=null){this.hideCells(t)}k()};this.destroy=function(){if(this.parent!=null){this.parent.removeChild(this.index)}else{n(this);$(this.element).remove()}};this.isLeaf=function(){return(this.childrens.length==0)?true:false};this.fold=function(){this.type="fold";for(var r=0;r<this.childrens.length;r++){var s=this.childrens[r];$(s.element).hide();if(!s.isLeaf()){s.fold()}}};this.open=function(){this.type="open";for(var r=0;r<this.childrens.length;r++){var s=this.childrens[r];$(s.element).show();if(!s.isLeaf()){s.open()}}};this.appendChild=function(s){var r=(this.isLeaf())?this.element:this.lastChildLeaf().element;$(s.element).insertAfter(r);this.childrens.push(s)};this.insertChild=function(s,w,t){var v=this.element;if(s>0){var u=this.childrens[s-1];if(!u.isLeaf()||this.childrens.length==s+1){v=u.lastChildLeaf().element}else{v=u.element}}$(w.element).insertAfter(v);var r=this.childrens.splice(0,s);r.push(w);this.childrens=r.concat(this.childrens);l()};this.removeChild=function(r){for(var s=0;s<this.childrens.length;s++){var t=this.childrens[s];if(t.index==r){this.childrens.splice(s,1);n(t)}}l()};this.lastChild=function(){if(!this.isLeaf()){return this.childrens[this.childrens.length-1]}return null};this.lastChildLeaf=function(r){var s=(!r)?this.lastChild():r;if(s.isLeaf()){return s}else{return this.lastChildLeaf(s.lastChild())}};this.showCell=function(r){o[r]=false;$(this.list[r]).show()};this.hideCell=function(r){o[r]=true;$(this.list[r]).hide()};this.hideCells=function(s){for(var r=0;r<s.length;r++){if(s[r].type=="hide"){this.hideCell(r)}}}};var c=function(i,v){var u=this;var A=i.$obj,q=i.$tpl;var k=[],r=[],y={};var l=false,z=b.index();function x(){s();n()}function n(){var C=[];A.thead.find("tr:last > th").each(function(G){C.push(this)});for(var E=0;E<C.length;E++){var F=new a(E);if(k[E]){F.element=k[E].element;F.order=k[E].order;F.name=k[E].name;F.data=k[E].data;F.type=k[E].type;F.width=k[E].width}else{F.element=C[E];if($(F.element).attr("width")||($(F.element).attr("style")&&$(F.element).attr("style").indexOf("width")!=-1)){F.width=$(F.element).outerWidth()}if(v&&v[E]){F.name=v[E]}}for(var D=0;D<r.length;D++){F.list.push(r[D].list[E]);F.data.push(r[D].data[F.name])}k[E]=F}}function t(D,E){if(D=="reload"){for(var C=0;C<k.length;C++){k[C].list[E.index]=E.list[C];k[C].data[E.index]=E.data[k[C].name]}}else{if(D=="append"){for(var C=0;C<k.length;C++){k[C].list.push(E.list[C]);k[C].data.push(E.data[k[C].name])}}else{if(D=="remove"){for(var C=0;C<k.length;C++){k[C].list.splice(E.index,1);k[C].data.splice(E.index,1)}}else{n()}}}}function j(C,E,F){var D=new e(C,q.row,F);D.reload(E,false,k);return D}function m(D,F){var E=F.childrens;if(E.length>0){for(var C=0;C<E.length;C++){D.push(E[C]);if(E[C].childrens.length>0){m(D,E[C])}}}}function p(D,E){if(!E){return null}var C=D.shift();if(C==undefined){return E}else{return p(D,E.childrens[C])}}function w(){var C=arguments[0],E=arguments[1];if(typeof(C)=="function"){E=C;C=0}else{C=(!isNaN(C))?C:0}for(var D=C;D<r.length;D++){r[D].reload(D);t("reload",r[D]);if(typeof(E)=="function"){E(D)}}}function h(D,E){var G=j(E,D),C=G;if(r.length==D&&!(D==0&&r.length==1)){var F=r[D-1];$(G.element).insertAfter((F.childrens.length==0)?F.element:F.lastChildLeaf().element)}else{$(G.element).insertBefore(r[D].element)}C=r.splice(0,D);C.push(G);r=C.concat(r);w(D);return G}function o(D,F){var E=z.getIndexList(D);var G=u.getRowParent(D),C=E[E.length-1];row=j(F,C,G);G.insertChild(C,row);return row}function g(C){var D=j(C,r.length);r.push(D);A.tbody.append(D.element);t("append",D);return D}function B(C,E){var F=u.getRow(C),D=j(E,F.childrens.length,F);F.appendChild(D);return D}function s(){if(typeof(q.none)!="function"){return false}if(l){if(r.length>0){A.tbody.find("tr:first").remove();l=false}}else{if(r.length==0){A.tbody.html(q.none());l=true}}return true}this.appendRow=function(){var D=arguments[0],E=arguments[1];var C=null;if(!E){C=g(D)}else{C=B(D,E)}s();return C};this.insertRow=function(D,E){var C=null;if(z.isIndexDepth(D)){C=o(D,E)}else{if(r.length==0&&parseInt(D)==0){C=this.appendRow(E)}else{C=h(D,E)}}s();return C};this.updateRow=function(C,E){var F=this.getRow(C);for(var D in E){F.data[D]=E[D]}F.reload(null,true);t("reload",F);return F};this.moveRow=function(D,C){if(D==C){return}var G=this.getRowAll(D),H=G[0],F=b.clone(H.data);if(G.length>1){for(var E=0;E<G.length;E++){var D=z.changeIndex(G[E].index,C,G[0].index);this.insertRow(D,G[E].data)}}else{this.insertRow(C,F)}this.removeRow(H.index)};this.removeRow=function(C){var D=this.getRow(C);if(!z.isIndexDepth(C)){D.destroy();t("remove",r[C]);r.splice(C,1);w(C)}else{D.destroy()}s()};this.openRow=function(C){this.getRow(C).open();y[C]=false;for(var E in y){if(y[E]!==false){var D=this.getRow(y[E]);if(D!=null){D.fold()}}}};this.openRowAll=function(){var D=this.getRowAll();for(var C=0;C<D.length;C++){if(!D[C].isLeaf()){D[C].open();y[D[C].index]=false}}};this.foldRow=function(C){this.getRow(C).fold();y[C]=C};this.foldRowAll=function(){var D=this.getRowAll();for(var C=0;C<D.length;C++){if(!D[C].isLeaf()){D[C].fold();y[D[C].index]=D[C].index}}};this.removeRows=function(){r=[];if(!s()){A.tbody.html("")}t()};this.sortRows=function(F,G){var E=this,C=b.sort(r);if(G){C.setCompare(function(I,H){return(D(I)>D(H))?true:false})}else{C.setCompare(function(I,H){return(D(I)<D(H))?true:false})}C.run();A.tbody.html("");w(function(H){A.tbody.append(r[H].element)});function D(I){var H=I.data[F];if(!isNaN(H)&&H!=null){return parseInt(H)}if(typeof(H)=="string"){return H.toLowerCase()}return""}};this.appendColumn=function(H,F){var G=k.length,D=$(q[H]({rows:F}));var E=D.filter("thead").find("tr");E.each(function(I){var J=A.thead.find("tr").eq(I);$(this).find("th").each(function(K){J.append(this);if(E.size()-1==I){k.push({element:this,list:[]})}})});for(var C=0;C<r.length;C++){D.filter("tbody").find("tr").eq(C).find("td").each(function(I){$(r[C].element).append(this);k[G+I].list.push(this);r[C].list.push(this);$.extend(r[C].data,F[C])})}};this.removeColumn=function(D){for(var E=0;E<k[D].list.length;E++){$(k[D].element).remove();$(k[D].list[E]).remove()}for(var C=0;C<r.length;C++){r[C].list.splice(D,1)}k.splice(D,1)};this.hideColumn=function(C){if(k[C].type=="hide"){return}var E=this.getRowAll();for(var D=0;D<E.length;D++){E[D].hideCell(C)}k[C].hide()};this.showColumn=function(C){if(k[C].type=="show"){return}var E=this.getRowAll();for(var D=0;D<E.length;D++){E[D].showCell(C)}k[C].show()};this.getColumnCount=function(){return k.length};this.getRowCount=function(){return r.length};this.getColumn=function(C){if(C==null){return k}else{return k[C]}};this.getRow=function(C){if(C==null){return r}else{if(z.isIndexDepth(C)){var D=z.getIndexList(C);return p(D,r[D.shift()])}else{return(r[C])?r[C]:null}}};this.getRowAll=function(C){var E=[],F=(C==null)?r:[this.getRow(C)];for(var D=0;D<F.length;D++){if(F[D]){E.push(F[D]);if(F[D].childrens.length>0){m(E,F[D])}}}return E};this.getRowParent=function(C){if(!z.isIndexDepth(C)){return null}return this.getRow(z.getParentIndex(C))};this.setColumn=function(C,D){k[C]=D};this.setRow=function(C,D){r[C]=D};this.printInfo=function(){console.log(k);console.log(r)};x()};var d=function(){var g=null,q=null;var s=null;function n(w){return"<tr class='expand' style='display: none;'><td id='EXPAND_"+w.timestamp+"'></td></tr>"}function j(y,w){var x=[];for(var z=0;z<w.length;z++){if(typeof(w[z])=="string"){var A=y.getColumn(w[z]);x.push(A.index)}else{x.push(w[z])}}return x}function h(y){var x=y.options.colshow,w=y.uit.getColumnCount();if(x===true){y.options.colshow=x=[];for(var z=0;z<w;z++){x.push(z)}}else{x=j(y,x)}for(var z=0;z<w;z++){if($.inArray(z,x)==-1){y.uit.hideColumn(z)}else{y.uit.showColumn(z)}}}function i(w){var z=null;var y=w.listColumn(),A=[];for(var x=0;x<y.length;x++){A.push($(y[x].element).text())}z=$(w.tpl.menu({columns:A}));$("body").append(z);q=f(z,{close:false});$(q.root).find("input[type=checkbox]").each(function(B){if(y[B].type=="show"){this.checked=true}else{this.checked=false}w.addEvent(this,"click",function(D){var C=$(q.root).find("input[type=checkbox]:checked").size();if(this.checked){w.showColumn(B,D)}else{if(C>0){w.hideColumn(B,D)}else{this.checked=true}}w.hideExpand();w.scroll()})})}function k(y){var w=g.table.outerWidth(),B=y.uit.getColumnCount(),x=false;for(var z=B-1;z>=0;z--){var C=y.getColumn(z),A=$(C.element).outerWidth();if($(C.element).css("display")=="none"){}else{if(!x){A=A-b.scrollSize;x=true}}$(C.list[0]).outerWidth(A)}g.tbody.outerWidth(w)}function l(w){if(!$(w.root).hasClass("table-scroll")){w.scroll()}g.tbody.unbind("scroll").scroll(function(x){if((g.tbody.scrollTop()+w.options.scrollHeight)==g.tbody.get(0).scrollHeight){w.emit("scroll",x);return false}})}function m(w,x){if(w.uit.getRowCount()<1){return}if(x){if(w.options.expand){g.tbody.prepend(n(w))}w.scroll()}if(w.options.scroll){l(w)}w.setVo()}function o(w,y){var y=(!y)?w.uit.getRow():y;for(var x=0;x<y.length;x++){(function(z){if(z.childrens.length>0){p(w,z);o(w,z.childrens)}else{p(w,z)}})(y[x])}}function p(w,x){w.addEvent(x.element,"click",function(y){w.emit("select",[x,y]);if(w.options.expand=="auto"){if(s===x.index){w.hideExpand(s,y)}else{if(s!=null){w.hideExpand(s,y)}w.showExpand(x.index,undefined,y)}}});w.addEvent(x.element,"contextmenu",function(y){w.emit("rowmenu",[x,y]);return false});if(w.options.fields&&w.options.editCell){$(x.element).find("td").each(function(z){var y=this;(function(A){w.addEvent(y,"dblclick",function(B){if(B.target.tagName=="TD"){r(w,B.currentTarget,x,A)}w.emit("editcell",[{row:x,column:w.getColumn(A)},B])})})(z)})}if(w.options.fields&&w.options.editRow){w.addEvent(x.element,"dblclick",function(y){if(y.target.tagName=="TD"||y.target.tagName=="TR"){$(x.element).find("td").each(function(z){r(w,this,x,z,y.target)});w.emit("editrow",[x,y])}})}}function r(E,w,F,D,B){var x=E.getColumn(D),A=(x.name)?x.data[F.index]:$(w).html(),y=(!B)?E.options.editCell:E.options.editRow;var C=$("<input type='text' class='input-cell' />").val(A);$(w).html(C);if(!x.name||(y!==true&&$.inArray(D,j(E,y))==-1)){C.attr("disabled",true)}if(!B){C.focus()}if(w==B){C.focus()}E.addEvent(C,"keypress",function(G){if(G.which==13){z()}});E.addEvent(g.tbody.find("tr"),"click",function(G){if(G.target.tagName=="TD"||G.target.tagName=="TR"){z()}});function z(){var G={};G[x.name]=C.val();E.update(F.index,G);C.remove()}}function v(w){g.thead.find("tr > th").each(function(x){(function(z,y){w.addEvent(y,"contextmenu",function(A){w.emit("colmenu",[w.getColumn(z),A]);return false})})(x,this)})}function u(y){var x=y.options.sort,w=(x===true)?y.uit.getColumnCount():x.length;for(var z=0;z<w;z++){var B=(x===true)?z:x[z],A=y.getColumn(B);if(A.element!=null){(function(D,C){y.addEvent(A.element,"click",function(E){if($(E.target).hasClass("resize")){return}y.sort(D,undefined,E);return false})})(B,A.name);$(A.element).css("cursor","pointer")}}}function t(H){var I=0;var A=null,z=null,C=0,w=0,G=null;g.thead.find(".resize").remove();for(var D=0;D<H.uit.getColumnCount()-1;D++){var E=$(H.getColumn(D).element),y=$("<div class='resize'></div>");var F=E.position();y.css({position:"absolute",width:"4px",height:"100%",left:(E.outerWidth()+F.left-1)+"px",top:F.top+"px",cursor:"w-resize","z-index":"1"});E.append(y);(function(J){H.addEvent(y,"mousedown",function(K){if(I==0){I=K.pageX}A=H.getColumn(J);z=B(J);C=$(A.element).outerWidth(),w=$(z.element).outerWidth();G=this;return false})})(D)}H.addEvent("body","mousemove",function(J){if(I>0){x(H,J.pageX-I)}});H.addEvent("body","mouseup",function(K){if(I>0){H.emit("colresize",[A,K]);I=0;var J=$(A.element).position().left;$(G).css("left",$(A.element).outerWidth()+J-1);return false}});function B(J){for(var K=J+1;K<H.uit.getColumnCount();K++){var L=H.getColumn(K).element;if(!$(L).is(":hidden")){return H.getColumn(K)}}}function x(K,L){var J=30;if(C+L<J||w-L<J){return}$(A.element).outerWidth(C+L);$(z.element).outerWidth(w-L);if(K.options.scroll){var M=$(z.element).outerWidth()-((A.index==K.uit.getColumnCount()-2)?b.scrollSize:0);$(A.list[0]).outerWidth($(A.element).outerWidth());$(z.list[0]).outerWidth(M)}}}this.setting=function(){var y=2500,x=70;function w(z,C){var A=y-1;for(var B=0;B<C.length;B++){A=(A<y)?(B+1)*x:y;$(C[B].element).addClass("fadeInLeft").css({"animation-duration":A+"ms"});(function(D){z.addEvent(C[D].element,"AnimationEnd",function(){$(C[D].element).removeClass("fadeInLeft")})})(B)}}return{options:{fields:null,csv:null,csvNames:null,rows:[],colshow:false,scroll:false,scrollHeight:200,expand:false,editCell:false,editRow:false,resize:false,sort:false,sortIndex:null,sortOrder:"asc",animate:false},valid:{update:[["integer","string","array"],"object"],updateTree:["array"],append:[["integer","string","object","array"],["object","array"]],insert:[["integer","string"],["object","array"]],select:[["integer","string"]],remove:[["integer","string"]],move:[["integer","string"],["integer","string"]],sort:[["integer","string"],["string","undefined"],["object","undefined"]],scroll:["integer"],open:[["integer","string"]],fold:[["integer","string"]],get:[["integer","string"]],getAll:[["integer","string"]],getColumn:[["integer","string"]],showColumn:[["integer","string"],["object","undefined"]],hideColumn:[["integer","string"],["object","undefined"]],initColumns:["array"],showExpand:[["integer","string"],["object","undefined"],["object","undefined"]],hideExpand:[["integer","string"],["object","undefined"]],setCsv:["string","string"],setCsvFile:[["string","object"],"object"],getCsv:[["boolean","undefined"]],getCsvBase64:[["boolean","undefined"]]},animate:{update:{after:function(){if(arguments.length!=1){var z=this.get(arguments[0]);$(z.element).addClass("flipInX").css({"animation-duration":"750ms"})}else{if(!b.browser.webkit&&!b.browser.mozilla){return}w(this,this.listAll())}}},updateTree:{after:function(){if(!b.browser.webkit&&!b.browser.mozilla){return}w(this,this.listAll())}},remove:{before:function(z){var A=this.get(z);$(A.element).addClass("fadeOutDown").css({"animation-duration":"350ms","animation-timing-function":"ease-out"})},delay:200},reset:{before:function(){var B=this.listAll(),z=2000,C=((z/B.length)<50)?50:(z/B.length);for(var A=0;A<B.length;A++){z-=C;$(B[A].element).addClass("fadeOutRight").css({"animation-duration":((z>0)?z:50)+"ms","animation-fill-mode":"both"})}},delay:1000}}}};this.init=function(){var w=this,x=this.options;g={table:$(this.root),thead:$(this.root).find("thead"),tbody:$(this.root).find("tbody")};this.uit=new c({$obj:g,$tpl:this.tpl},x.fields);if(x.fields&&x.colshow){h(this)}if(x.fields&&this.tpl.menu){i(this)}if(x.resize){t(this)}if(x.fields&&x.sort){u(this)}if(x.rows.length>0){this.update(x.rows)}else{this.setVo()}if(!x.fields){if(x.sort||x.colshow||x.editCell||x.editRow){throw new Error("JUI_CRITICAL_ERR: 'fields' option is required")}}v(this);return this};this.update=function(){var y=(arguments.length==1)?arguments[0]:arguments[1],x=(arguments.length==2)?arguments[0]:null;if(x!=null){var w=this.uit.updateRow(x,y);p(this,w);if(parseInt(x)==0){this.scroll()}}else{this.uit.removeRows();this.scroll();this.append(y);if(this.options.sortIndex){this.sort(this.options.sortIndex,this.options.sortOrder,null)}}};this.updateTree=function(x){var y=b.index();this.uit.removeRows();for(var w=0;w<x.length;w++){var z=y.getParentIndex(x[w].index);if(z==null){this.uit.appendRow(x[w].data)}else{this.uit.appendRow(z,x[w].data)}}m(this,true);o(this)};this.append=function(){var A=(this.count()>0)?false:true;var z=(arguments.length==1)?arguments[0]:arguments[1],x=(arguments.length==2)?arguments[0]:null;z=(z.length==undefined)?[z]:z;for(var y=0;y<z.length;y++){var w=null;if(x!=null){w=this.uit.appendRow(x,z[y])}else{w=this.uit.appendRow(z[y])}if(!A){p(this,w)}}m(this,A);if(A){o(this)}};this.insert=function(w,y){var z=(this.count()>0)?false:true;var y=(y.length==undefined)?[y]:y;for(var x=0;x<y.length;x++){this.uit.insertRow(w,y[x])}m(this,z);o(this)};this.select=function(w){var x=this.get(w);$(x.element).parent().find(".selected").removeClass("selected");$(x.element).addClass("selected");return x};this.remove=function(w){if(w==null){return null}this.uit.removeRow(w);o(this);this.scroll()};this.reset=function(){this.uit.removeRows();this.scroll()};this.move=function(x,w){this.uit.moveRow(x,w);o(this);if(parseInt(x)==0||parseInt(w)==0){this.scroll()}};this.sort=function(x,w,z){if(!this.options.fields||!this.options.sort){return}var y=this.getColumn(x);if(typeof(y.name)=="string"){y.order=(w)?w:(y.order=="asc")?"desc":"asc";this.uit.setColumn(x,y);this.uit.sortRows(y.name,(y.order=="desc")?true:false);this.emit("sort",[y,z]);m(this,true);o(this)}};this.scroll=function(w){if(!this.options.scroll){return}var x=this,y=(w&&w>0)?w:this.options.scrollHeight,y=(y>0)?y:200;this.options.scrollHeight=y;g.tbody.css("maxHeight",y+"px");setTimeout(function(){if(g.tbody.outerHeight()<y){g.table.removeClass("table-scroll")}else{g.table.addClass("table-scroll")}k(x)},10)};this.open=function(w){if(w==null){return}this.uit.openRow(w);this.emit("open",[this.get(w)])};this.fold=function(w){if(w==null){return}this.uit.foldRow(w);this.emit("fold",[this.get(w)])};this.openAll=function(){this.uit.openRowAll();this.emit("openall")};this.foldAll=function(){this.uit.foldRowAll();this.emit("foldall")};this.resize=function(){this.scroll();if(this.options.resize){t(this)}};this.resizeColumns=function(){var x=this.listColumn();for(var w=0;w<x.length;w++){if(x[w].width==null){$(x[w].element).outerWidth("auto")}}};this.size=function(){return this.uit.getRowCount()};this.count=function(){return this.uit.getRowCount()};this.list=function(){return this.uit.getRow()};this.listAll=function(){return this.uit.getRowAll()};this.listColumn=function(){return this.uit.getColumn()};this.get=function(w){if(w==null){return null}return this.uit.getRow(w)};this.getAll=function(w){if(w==null){return null}return this.uit.getRowAll(w)};this.getColumn=function(w){if(w==null){return null}else{if(typeof(w)=="string"){return this.uit.getColumn($.inArray(w,this.options.fields))}else{return this.uit.getColumn(w)}}};this.showColumn=function(w,y){if(!this.options.fields){return}var x=this.getColumn(w);this.uit.showColumn(x.index);this.scroll();this.resizeColumns();if(this.options.resize){t(this)}this.emit("colshow",[x,y])};this.hideColumn=function(w,y){if(!this.options.fields){return}var x=this.getColumn(w);this.uit.hideColumn(x.index);this.scroll();this.resizeColumns();if(this.options.resize){t(this)}this.emit("colhide",[x,y])};this.initColumns=function(w){if(typeof(w)!="object"){return}this.options.colshow=w;h(this);this.scroll();this.resizeColumns();if(this.options.resize){t(this)}};this.columnMenu=function(w){if(!this.options.fields||!q){return}var y=this.listColumn();var A=g.thead.offset(),z=A.left+g.table.outerWidth()-$(q.root).outerWidth();w=(isNaN(w)||(w>z+A.left))?z:w;w=(w<0)?0:w;$(q.root).find("input[type=checkbox]").each(function(x){if(y[x].type=="show"){this.checked=true}else{this.checked=false}});q.move(w,A.top+g.thead.outerHeight());q.show()};this.showExpand=function(w,z,y){if(!this.options.expand){return}var B="#EXPAND_"+this.timestamp,A=this.get(w),z=(typeof(z)!="object")?$.extend({row:A},A.data):z,x=$(B).parent().show();g.tbody.find("tr").removeClass("open");x.insertAfter($(A.element).addClass("open"));$(B).attr("colspan",g.thead.find("tr:last > th:visible").size()).html(this.tpl.expand(z));this.setVo();s=w;this.emit("expand",[A,y])};this.hideExpand=function(w,x){if(!this.options.expand){return}var w=(w)?w:s;$("#EXPAND_"+this.timestamp).parent().hide();g.tbody.find("tr").removeClass("open");s=null;this.emit("expandend",[(w)?this.get(w):null,x])};this.getExpand=function(){if(!this.options.expand){return}if(s==null){return null}return this.get(s)};this.setCsv=function(){if(!this.options.fields&&!this.options.csv){return}var x=(arguments.length==1)?arguments[0]:arguments[1],B=(arguments.length==2)?arguments[0]:null;var w=b.getCsvFields(this.options.fields,this.options.csv),A=b.csvToData(w,x);if(B==null){this.update(A)}else{this.reset();for(var z=0;z<A.length;z++){var y=A[z][B];if(y){this.insert(y,A[z])}}}};this.setCsvFile=function(){if(!this.options.fields&&!this.options.csv){return}var w=this,y=(arguments.length==1)?arguments[0]:arguments[1],x=(arguments.length==2)?arguments[0]:null;b.fileToCsv(y,function(z){if(x==null){w.setCsv(z)}else{w.setCsv(x,z)}})};this.getCsv=function(x){if(!this.options.fields&&!this.options.csv){return}var w=b.getCsvFields(this.options.fields,this.options.csv);var z=[],A=(x)?this.listAll():this.list();for(var y=0;y<A.length;y++){z.push(A[y].data)}return b.dataToCsv2({fields:w,rows:z,names:this.options.csvNames})};this.getCsvBase64=function(w){if(!this.options.fields&&!this.options.csv){return}return b.csvToBase64(this.getCsv(w))}};return d});jui.define("uix.tree",["util"],function(b){var c=function(l,e){var g=this;this.data=l;this.element=null;this.index=null;this.nodenum=null;this.parent=null;this.childrens=[];this.depth=0;this.type="open";function i(m){g.nodenum=(!isNaN(m))?m:g.nodenum;if(g.parent){if(g.parent.index==null){g.index=""+g.nodenum}else{g.index=g.parent.index+"."+g.nodenum}}if(g.parent&&typeof(g.index)=="string"){g.depth=g.index.split(".").length}if(g.childrens.length>0){f(g)}}function f(n){var o=n.childrens;for(var m=0;m<o.length;m++){o[m].reload(m);if(o[m].childrens.length>0){f(o[m])}}}function h(){if(!e){return g.element}try{var m=$(e($.extend({node:{index:g.index,data:g.data,depth:g.depth}},g.data))).get(0)}catch(n){console.log(n)}return m}function k(o){$(o.element).remove();for(var n=0;n<o.childrens.length;n++){var m=o.childrens[n];if(m.childrens.length>0){k(m)}else{$(m.element).remove()}}}function j(o){for(var n=0;n<o.childrens.length;n++){var m=o.childrens[n];m.reload(n);if(m.childrens.length>0){j(m)}}}this.reload=function(n,o){i(n);if(this.element!=null){var m=h();if(!o){$(this.parent.element).children("ul").append(m)}else{$(m).insertAfter(this.element)}$(this.element).remove();this.element=m}else{this.element=h()}};this.reloadChildrens=function(){j(this)};this.destroy=function(){if(this.parent!=null){this.parent.removeChild(this.index)}else{k(this);$(this.element).remove()}};this.isLeaf=function(){return(this.childrens.length==0)?true:false};this.fold=function(){$(this.element).children("ul").hide();this.type="fold"};this.open=function(){$(this.element).children("ul").show();this.type="open"};this.appendChild=function(m){$(this.element).children("ul").append(m.element);this.childrens.push(m)};this.insertChild=function(o,n){if(o==0){if(this.childrens.length==0){$(this.element).children("ul").append(n.element)}else{$(n.element).insertBefore(this.childrens[0].element)}}else{$(n.element).insertAfter(this.childrens[o-1].element)}var m=this.childrens.splice(0,o);m.push(n);this.childrens=m.concat(this.childrens);j(this)};this.removeChild=function(m){for(var n=0;n<this.childrens.length;n++){var o=this.childrens[n];if(o.index==m){this.childrens.splice(n,1);k(o)}}j(this)};this.lastChild=function(){if(this.childrens.length>0){return this.childrens[this.childrens.length-1]}return null};this.lastChildLeaf=function(m){var n=(!m)?this.lastChild():m;if(n.isLeaf()){return n}else{return this.lastChildLeaf(n.lastChild())}}};var a=function(o){var p=this,k=null;var e=o.$obj,f=o.$tpl;var g=b.index();function n(t,u,r){var s=new c(t,f.node);s.parent=(r)?r:null;s.reload(u);return s}function q(t,u){var r=u.childrens;if(r.length>0){for(var s=0;s<r.length;s++){t.push(r[s]);if(r[s].childrens.length>0){q(t,r[s])}}}}function j(t,s){if(!s){return null}var r=t.shift();if(r==undefined){return s}else{return j(t,s.childrens[r])}}function h(r,v){var u=g.getIndexList(r);var s=p.getNodeParent(r),t=u[u.length-1];node=n(v,t,s);s.insertChild(t,node);return node}function i(s){if(k==null){k=n(s);e.tree.append(k.element)}else{var r=n(s,k.childrens.length,k);k.appendChild(r)}return r}function m(s,u){var t=p.getNode(s),r=n(u,t.childrens.length,t);t.appendChild(r);return r}function l(u,v){var r=[];while(true){var t=v.parent;if(t){r.push(t);v=t}else{break}}for(var s=0;s<r.length;s++){if(u==r[s]){return true}}return false}this.appendNode=function(){var r=arguments[0],s=arguments[1];if(!s){return i(r)}else{return m(r,s)}};this.insertNode=function(r,s){if(k.childrens.length==0&&parseInt(r)==0){return this.appendNode(s)}else{return h(r,s)}};this.updateNode=function(r,u){var t=this.getNode(r);for(var s in u){t.data[s]=u[s]}t.reload(t.nodenum,true);t.reloadChildrens();return t};this.removeNode=function(r){this.getNode(r).destroy()};this.removeNodes=function(){var r=k.childrens;if(r.length>0){this.removeNode(r[0].index)}if(r.length>0){this.removeNodes()}};this.openNode=function(r){if(r==null){this.getRoot().open()}else{this.getNode(r).open()}};this.foldNode=function(r){if(r==null){this.getRoot().fold()}else{this.getNode(r).fold()}};this.openNodeAll=function(s){var r=this.getNodeAll(s);for(var t=0;t<r.length;t++){r[t].open()}if(s==null){this.getRoot().open()}};this.foldNodeAll=function(s){var r=this.getNodeAll(s);for(var t=0;t<r.length;t++){r[t].fold()}if(s==null){this.getRoot().fold()}};this.moveNode=function(v,u){if(v==u){return}var w=this.getNode(v),r=this.getNodeParent(u);var t=g.getIndexList(u);tNo=t[t.length-1];if(!l(w,r)){w.parent.childrens.splice(w.nodenum,1);w.parent.reloadChildrens();w.parent=r;var s=r.childrens.splice(0,tNo);s.push(w);r.childrens=s.concat(r.childrens);r.reloadChildrens()}};this.getNode=function(s){if(s==null){return k.childrens}else{var r=k.childrens;if(g.isIndexDepth(s)){var t=g.getIndexList(s);return j(t,r[t.shift()])}else{return(r[s])?r[s]:null}}};this.getNodeAll=function(r){var t=[],u=(r==null)?k.childrens:[this.getNode(r)];for(var s=0;s<u.length;s++){if(u[s]){t.push(u[s]);if(u[s].childrens.length>0){q(t,u[s])}}}return t};this.getNodeParent=function(r){var s=g.getIndexList(r);if(s.length==1){return k}else{if(s.length==2){return this.getNode(s[0])}else{if(s.length>2){s.pop();return this.getNode(s.join("."))}}}};this.getRoot=function(){return k}};var d=function(){var e=null;var h={start:null,end:null},g=b.index();function k(p,q){for(var r=0;r<q.length;r++){var s=q[r];$(s.element).removeClass("open fold leaf last");if(s.parent&&s.isLeaf()){$(s.element).addClass("leaf")}else{if(s.type=="open"){$(s.element).addClass("open");s.open()}else{$(s.element).addClass("fold");s.fold()}}if(!s.parent){$(s.element).addClass("root")}else{if(s.parent.lastChild()==s){$(s.element).addClass("last")}}$(s.element).children("i:first-child").remove();$(s.element).prepend($("<i></i>"))}}function o(p,q,t){if(q==null){if(p.options.rootHide){var s=p.uit.getRoot().childrens;for(var r=0;r<s.length;r++){t(s[r].index)}l(p,false)}else{t(q);l(p,true)}}else{t(q);l(p,false)}}function i(p,q){for(var r=0;r<q.length;r++){(function(t){var s=$(t.element);p.addEvent(s.children("i:first-child"),"click",function(u){if(t.type=="open"){p.fold(t.index,u)}else{p.open(t.index,u)}u.stopPropagation()});p.addEvent(s.children("a,span,div")[0],"click",function(u){p.emit("select",[t,u]);u.stopPropagation()})})(q[r])}}function m(q,r){if(!q.options.drag){return}var p=q.uit.getRoot();$("body").unbind("mousemove").unbind("mouseup");for(var s=0;s<r.length;s++){(function(t){$(t.element).unbind("mousedown").unbind("mouseup");q.addEvent(t.element,"mousedown",function(u){if(u.target.tagName=="I"){return}if(h.start==null){h.start=t.index}return false});q.addEvent(t.element,"mouseup",function(w){if(w.target.tagName=="I"){return}if(q.options.dragChild!==false){if(h.start&&h.start!=t.index){var u=t.lastChild(),v=(u)?g.getNextIndex(u.index):t.index+".0";q.move(h.start,v)}}h.start=null;h.end=null;return false});q.addEvent(p.element,"mouseup",function(u){if(u.target.tagName=="I"){return}if(q.options.dragChild!==false){if(h.start){q.move(h.start,(""+p.childrens.length))}}h.start=null;h.end=null;return false})})(r[s])}q.addEvent("body","mouseup",function(t){if(h.start&&h.end){q.move(h.start,h.end)}h.start=null;h.end=null;return false})}function f(p){if(!p.options.drag){return}$(p.root).find(".drag").remove();var q=p.listAll();for(var r=0;r<q.length;r++){var s=q[r],t=$(s.element).position();if(t.top>0){j(p,s,t)}}}function n(p){if(!p.options.drag){return}var q=p.listAll();for(var r=0;r<q.length;r++){var s=q[r],t=$(s.element).position();if(t.top>0&&s.parent){if(s.parent.lastChild()==s){t.top=t.top+$(s.element).outerHeight();j(p,s,t,true)}}}}function j(q,s,u,t){if(!q.options.drag){return}var r=(t)?g.getNextIndex(s.index):s.index;var p=$("<div class='drag'></div>").attr("data-index",r).css(u).outerWidth($(s.element).outerWidth());$(q.root).append(p);q.addEvent(p,"mouseover",function(v){if(h.start){h.end=r;p.addClass("on")}});q.addEvent(p,"mouseout",function(v){if(h.start){p.removeClass("on")}})}function l(q,p){var r=q.listAll();k(q,r);i(q,r);m(q,r);f(q);n(q);if(p){k(q,[q.uit.getRoot()]);i(q,[q.uit.getRoot()])}}this.setting=function(){return{options:{root:null,rootHide:false,rootFold:false,drag:false,dragChild:true},valid:{update:["string","object"],append:[["string","object","array"],["object","array"]],insert:["string",["object","array"]],select:["string"],remove:["string"],move:["string","string"],open:[["string","null"],["object","undefined"]],fold:[["string","null"],["object","undefined"]],openAll:["string"],foldAll:["string"],listParents:["string"],get:["string"],getAll:["string"]}}};this.init=function(){var q=this,r=this.options;this.uit=new a({$obj:{tree:$(this.root)},$tpl:this.tpl});if(r.root){this.uit.appendNode(r.root);l(this,true)}else{throw new Error("JUI_CRITICAL_ERROR: root data is required")}if(r.rootHide){var p=this.uit.getRoot();$(p.element).css("padding-left","0px");$(p.element).children("*:not(ul)").hide()}if(r.rootFold){this.fold()}return this};this.update=function(p,q){this.uit.updateNode(p,q);l(this)};this.append=function(){var r=(arguments.length==1)?arguments[0]:arguments[1],p=(arguments.length==2)?arguments[0]:null;r=(r.length==undefined)?[r]:r;for(var q=0;q<r.length;q++){if(p!=null){this.uit.appendNode(p,r[q])}else{this.uit.appendNode(r[q])}}l(this)};this.insert=function(p,s){var r=(s.length==undefined)?[s]:s;for(var q=0;q<r.length;q++){this.uit.insertNode(p,r[q])}l(this)};this.select=function(p){var q=(p==null)?this.uit.getRoot():this.get(p);$(this.root).find("li").removeClass("active");$(q.element).addClass("active");return q};this.remove=function(p){this.uit.removeNode(p);l(this)};this.reset=function(){this.uit.removeNodes();l(this)};this.move=function(q,p){this.uit.moveNode(q,p);l(this)};this.open=function(q,r){if(q==null&&this.options.rootHide){return}var p=(q==null);this.uit.openNode(q);l(this,p);this.emit("open",[(p)?this.uit.getRoot():this.get(q),r])};this.fold=function(q,r){if(q==null&&this.options.rootHide){return}var p=(q==null);this.uit.foldNode(q);l(this,p);this.emit("fold",[(p)?this.uit.getRoot():this.get(q),r])};this.openAll=function(r){var q=this,p=(r==null);o(this,r,function(s){q.uit.openNodeAll(s)});this.emit("openall",[(p)?this.uit.getRoot():this.get(r)])};this.foldAll=function(r){var q=this,p=(r==null);o(this,r,function(s){q.uit.foldNodeAll(s)});this.emit("foldall",[(p)?this.uit.getRoot():this.get(r)])};this.list=function(){return this.uit.getNode()};this.listAll=function(){return this.uit.getNodeAll()};this.listParents=function(q){var s=this.get(q),p=[];if(s.parent){r(s.parent)}function r(t){if(t.index!=null){p.push(t);if(t.parent!=null){r(t.parent)}}}return p.reverse()};this.get=function(p){if(p==null){return null}return this.uit.getNode(p)};this.getAll=function(p){if(p==null){return null}return this.uit.getNodeAll(p)}};return d});jui.define("uix.window",["util","ui.modal"],function(a,b){var c=function(){var g=2000,j=null,f={},h={},i={},d=null;function e(){var k=(i.$foot.length<1)?parseInt(i.$root.css("border-radius")):i.$foot.outerHeight();i.$body.outerHeight(i.$root.outerHeight()-i.$head.outerHeight()-k)}this.setting=function(){function k(l,m){$(l.root).addClass(m).css({"animation-duration":"500ms","animation-fill-mode":"both"});l.addEvent(l.root,"AnimationEnd",function(){$(l.root).removeClass(m)})}return{options:{width:400,height:300,left:"auto",top:"auto",right:"auto",bottom:"auto",modal:false,move:true,resize:true,modalIndex:0,animate:false},valid:{show:["integer","integer"],move:["integer","integer"],update:["string"],setTitle:["string"],setSize:["integer","integer"]},animate:{show:{after:function(){k(this,"fadeInDown")}},hide:{before:function(){k(this,"fadeOutUp")},after:function(){$(this.root).removeClass("fadeOutUp")},delay:500},move:{after:function(){k(this,"shake")}}}}};this.init=function(){var m=this,n=this.options;var q=$(this.root),l=$(this.root).children(".head"),p=$(this.root).children(".body"),k=$(this.root).children(".foot"),o=$("body");if(n.modal){n.move=false;n.resize=false}i={$root:q,$head:l,$body:p,$foot:k};o.children(this.selector).remove();q.css(n).appendTo(o);if(n.move){this.addEvent(l,"mousedown",function(r){j=q;f.check=true;f.disX=r.pageX-j.offset().left;f.disY=r.pageY-j.offset().top})}if(n.resize){q.append("<i class='icon-resize resize'></i>");this.addEvent(q.children(".resize"),"mousedown",function(r){j=q;h.check=true;h.disX=j.width()+j.offset().left;h.disWidth=j.width();h.disY=j.height()+j.offset().top;h.disHeight=j.height();return false})}if(!n.modal){m.addEvent(q,"mousedown",function(r){q.css("z-index",++g);r.stopPropagation()})}this.addEvent(l.find(".close"),"click",function(r){m.hide();return false});this.addEvent("body","mousemove",function(u){if(f.check){var r=u.pageX-f.disX;var v=u.pageY-f.disY;$(j).css({left:r+"px",top:v+"px"})}if(h.check){var t=u.pageX-h.disX,s=u.pageY-h.disY;j.width(h.disWidth+t);j.height(h.disHeight+s);e()}});this.addEvent("body","mouseup",function(r){if(f.check){m.emit("move",r)}if(h.check){m.emit("resize",r)}f.check=false;h.check=false});this.type="hide";e();setTimeout(function(){q.hide();if(n.modal){var r=(n.modalIndex>0)?{index:n.modalIndex}:{};d=b(m.selector,$.extend({autoHide:false},r))}},10);return this};this.hide=function(){if(d){d.hide()}else{i.$root.hide()}this.emit("hide");this.type="hide"};this.show=function(k,l){if(d){d.show()}else{i.$root.show()}if(k||l){this.move(k,l)}this.emit("show");this.type="show"};this.move=function(k,l){i.$root.css("left",k);i.$root.css("top",l)};this.update=function(k){i.$body.empty().html(k)};this.setTitle=function(k){i.$head.find(".title").empty().html(k)};this.setSize=function(k,l){i.$root.width(k);i.$root.height(l);e()};this.resize=function(){e()}};return c});jui.define("uix.xtable",["util","ui.modal"],function(a,b){a.resize(function(){var e=jui.get("xtable");for(var g=0;g<e.length;g++){var d=e[g].list;for(var f=0;f<d.length;f++){d[f].resize()}}},1000);var c=function(){var k=null,h=null;var q=[],l=null;var i=1,m=null;var o=null,p=false;function j(s){var r=["buffer","bufferCount","csvCount","sortLoading","sortCache","sortIndex","sortOrder","event","rows"];h=jui.create("table",$(s.root).children("table"),u(s,r.concat("resize")));t(s,h);k=jui.create("table",$(s.root).children("table.head"),u(s,r));function u(w,v){var x={};for(var y in w.options){if($.inArray(y,v)==-1){x[y]=w.options[y]}}return x}function t(x,v){var y=$(v.root).clone(),A=v.listColumn();if(x.options.buffer!="page"){$(v.root).wrap("<div class='body' style='max-height: "+x.options.scrollHeight+"px'></div>")}else{$(v.root).wrap("<div class='body'></div>")}for(var z=0;z<A.length;z++){var w=$(A[z].element);w.html("").outerHeight(0).attr("style",w.attr("style")+"border-top-width: 0px !important;border-bottom-width: 0px !important;padding-top: 0px !important;padding-bottom: 0px !important")}y.children("tbody").remove();$(x.root).append(y.addClass("head"));$(x.root).prepend($("<div></div>").outerHeight(y.height()))}}function g(r){k.on("colresize",function(u,y){var x=k.listColumn(),w=h.listColumn(),v=false;for(var t=x.length-1;t>=0;t--){var s=$(x[t].element).outerWidth();if(r.options.buffer!="page"&&x[t].type=="show"&&!v&&!a.browser.msie){$(w[t].element).outerWidth("auto");v=true}else{$(x[t].element).outerWidth(s);$(w[t].element).outerWidth(s)}}r.emit("colresize",[u,y])});k.on("colshow",function(s,t){h.uit.showColumn(s.index);r.resize();r.emit("colshow",[s,t])});k.on("colhide",function(s,t){h.uit.hideColumn(s.index);r.resize();r.emit("colhide",[s,t])});k.on("colmenu",function(s,t){r.emit("colmenu",[s,t])});k.on("sort",function(s,t){r.sort(s.index,s.order,t);r.emit("sort",[s,t]);if(r.options.sortCache){r.setOption({sortIndex:s.index,sortOrder:s.order})}});h.on("select",function(t,s){r.emit("select",[t,s])});h.on("rowmenu",function(t,s){r.emit("rowmenu",[t,s])});h.on("expand",function(t,s){r.emit("expand",[t,s])});h.on("expandend",function(t,s){r.emit("expandend",[t,s])})}function f(r){var s=$(r.root).children(".body");s.unbind("scroll").scroll(function(t){if((this.scrollTop+r.options.scrollHeight)>=s.get(0).scrollHeight){r.next();r.emit("scroll",t);return false}})}function d(u,v,x){if(l==null){l=q}else{q=l}var s=q.slice(),t=[];for(var w=0,r=s.length;w<r;w++){if(x(s[w][v])){t.push(s[w])}}u.update(t);u.emit("filter",[t])}function n(r){if(l!=null){r.update(l);l=null}}function e(r){var t=k.listColumn();for(var s=0;s<t.length;s++){if(t[s].width==null){$(t[s].element).outerWidth("auto")}}}this.setting=function(){var t=2500,s=70;function r(u,y,x){var v=t-1;for(var w=0;w<y.length;w++){v=(v<t)?(w+1)*s:t;$(y[w].element).addClass(x).css({"animation-duration":v+"ms"});(function(z){u.addEvent(y[z].element,"AnimationEnd",function(){$(y[z].element).removeClass(x)})})(w)}}return{options:{fields:null,csv:null,csvNames:null,csvCount:10000,rows:[],colshow:false,expand:false,resize:false,scrollHeight:200,buffer:"scroll",bufferCount:100,sort:false,sortLoading:false,sortCache:false,sortIndex:null,sortOrder:"asc",animate:false},valid:{select:[["integer","string"]],update:["array"],page:["integer"],sort:[["integer","string"],["string","undefined"],["object","undefined"],["boolean","undefined"]],filter:[["integer","string"],["integer","string","boolean"],"function"],height:["integer"],getColumn:[["integer","string"]],getData:[["integer","string"]],showColumn:[["integer","string"]],hideColumn:[["integer","string"]],initColumns:["array"],columnMenu:["integer"],showExpand:[["integer","string"],"object"],hideExpand:[["integer","string"]],showLoading:["integer"],setCsv:["string"],setCsvFile:["object"],rowFunc:["string",["integer","string"],"function"]},animate:{update:{after:function(){if(!a.browser.webkit&&!a.browser.mozilla){return}r(this,this.list(),"fadeInLeft")}},page:{after:function(){r(this,this.list(),(m=="next")?"fadeInLeft":"fadeInRight")}},reset:{before:function(){var w=this.list(),u=2000,x=((u/w.length)<50)?50:(u/w.length);for(var v=0;v<w.length;v++){u-=x;$(w[v].element).addClass("fadeOutRight").css({"animation-duration":((u>0)?u:50)+"ms","animation-fill-mode":"both"})}},delay:1000},filter:{after:function(){r(this,this.list(),"flipInX")}}}}};this.init=function(){var r=this,s=this.options;j(this);g(this);if(s.buffer!="page"){$(this.root).addClass("xtable-scroll")}if(s.buffer=="scroll"){f(this)}if(s.rows){this.update(s.rows)}if(s.tpl.loading){var t=$(s.tpl.loading);$(this.root).append(t);o=b(t,{target:this.selector,opacity:0.1,autoHide:false});s.sortLoading=(s.sortLoading===true)?500:s.sortLoading}return this};this.select=function(r){return h.select(r)};this.update=function(r){q=r;this.clear();this.next();this.emit("update");k.emit("colresize");if(this.options.sortIndex){this.sort(this.options.sortIndex,this.options.sortOrder,undefined,true)}};this.next=function(){var u=(i-1)*this.options.bufferCount,r=u+this.options.bufferCount;r=(r>q.length)?q.length:r;if(r<=q.length){var t=[];for(var s=u;s<r;s++){t.push(q[s])}h.append(t);this.emit("next",[i]);if(t.length>0){i++}}};this.page=function(r){if(this.options.buffer=="scroll"){return false}if(this.getPage()==r){return false}m=(i>r)?"prev":"next";this.clear();i=(r<1)?1:r;this.next()};this.sort=function(u,r,y,w){if(!this.options.fields||!this.options.sort){return}var t=this,v=k.getColumn(u);if(typeof(v.name)=="string"){v.order=(r)?r:(v.order=="asc")?"desc":"asc";k.uit.setColumn(u,v);if(this.options.sortLoading&&!w){t.showLoading();setTimeout(function(){x()},this.options.sortLoading)}else{x()}}function x(){var z=a.sort(q);if(v.order=="desc"){z.setCompare(function(B,A){return(s(B)>s(A))?true:false})}else{z.setCompare(function(B,A){return(s(B)<s(A))?true:false})}z.run();t.emit("sortend",[v,y]);t.clear();t.next();t.hideLoading()}function s(A){var z=A[v.name];if(!isNaN(z)&&z!=null){return parseInt(z)}if(typeof(z)=="string"){return z.toLowerCase()}return""}};this.filter=function(s,r,u){if(!this.options.fields){return}var t=k.getColumn(s);n(this);if(t.name&&r){d(this,t.name,function(v){if(typeof(u)=="function"){if(u(v,r)){return true}}else{if((""+v).indexOf((""+r))!=-1){return true}}return false})}else{this.emit("filter",[q])}};this.clear=function(){i=1;h.uit.removeRows();h.scroll()};this.reset=function(){this.clear();q=[]};this.resize=function(){k.resizeColumns();k.resize();k.emit("colresize")};this.height=function(r){if(this.options.buffer!="scroll"){return}this.options.scrollHeight=r;$(this.root).find(".body").css("max-height",r+"px");f(this)};this.size=function(){return q.length};this.count=function(){return q.length};this.list=function(){return h.list()};this.listColumn=function(){return k.listColumn()};this.listData=function(){return q};this.get=function(r){if(r==null){return null}return h.get(r)};this.getColumn=function(r){return k.getColumn(r)};this.getData=function(r){return q[r]};this.showColumn=function(r){k.showColumn(r)};this.hideColumn=function(r){k.hideColumn(r)};this.initColumns=function(r){k.initColumns(r);h.initColumns(r);k.emit("colresize")};this.columnMenu=function(r){k.columnMenu(r)};this.showExpand=function(r,s){h.showExpand(r,s)};this.hideExpand=function(r){if(r){h.hideExpand(r)}else{h.hideExpand()}};this.getExpand=function(){return h.getExpand()};this.showLoading=function(s){if(!o||p){return}o.show();p=true;if(s>0){var r=this;setTimeout(function(){r.hideLoading()},s)}};this.hideLoading=function(){if(!o||!p){return}o.hide();p=false};this.setCsv=function(s){if(!this.options.fields&&!this.options.csv){return}var r=a.getCsvFields(this.options.fields,this.options.csv);this.update(a.csvToData(r,s))};this.setCsvFile=function(s){if(!this.options.fields&&!this.options.csv){return}var r=this;a.fileToCsv(s,function(t){r.setCsv(t)})};this.getCsv=function(){if(!this.options.fields&&!this.options.csv){return}var s=a.getCsvFields(this.options.fields,this.options.csv),r=(q.length>this.options.csvCount)?this.options.csvCount:q.length;return a.dataToCsv2({fields:s,rows:q,count:r,names:this.options.csvNames})};this.getCsvBase64=function(){if(!this.options.fields&&!this.options.csv){return}return a.csvToBase64(this.getCsv())};this.rowFunc=function(w,u,y){if(!this.options.fields){return}var v=(typeof(y)=="function")?true:false;var z=0,t=(v)?0:q.length,r=k.getColumn(u);if(r.name){for(var s=0;s<q.length;s++){var x=q[s][r.name];if(!isNaN(x)){if(v){if(y(q[s])){z+=x;t++}}else{z+=x}}}}if(w=="sum"){return z}else{if(w=="avg"){return z/t}}return null};this.getPage=function(){return i-1}};return c});